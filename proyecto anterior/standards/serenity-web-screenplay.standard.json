{
  "name": "Estándar Serenity Screenplay - WEB UI (Integrado y Mejorado)",
  "version": "1.3.0",
  "purpose": "Definir una forma única, consistente y escalable de implementar pruebas de interfaces web usando Serenity BDD + Screenplay con Selenium WebDriver, incluyendo ejemplos prácticos y mejores prácticas de automatización",
  "framework": "Serenity BDD",
  "pattern": "Screenplay",
  "scope": "WEB UI",
  "requestTypes": {
    "description": "Tipos de solicitudes soportadas por el MCP - No todo es Historia de Usuario",
    "types": {
      "INIT": {
        "name": "Inicialización",
        "description": "Crear estructura base del proyecto, sin páginas ni lógica funcional",
        "requires": [
          "framework",
          "pattern",
          "scope",
          "basePackage"
        ],
        "generates": [
          "projectStructure",
          "mainRunner",
          "serenityProperties"
        ],
        "notRequires": [
          "pages",
          "validations",
          "ui",
          "tasks"
        ],
        "rules": {
          "generateStructureOnly": true,
          "noPages": true,
          "noValidations": true,
          "noUI": true,
          "noTasks": true
        }
      },
      "WEB_HU": {
        "name": "Historia de Usuario WEB",
        "description": "Historia de usuario completa con páginas, locators, tasks, interactions y validaciones",
        "requires": [
          "id",
          "nombre",
          "url",
          "paginas",
          "selectores",
          "acciones",
          "validaciones"
        ],
        "generates": [
          "feature",
          "stepDefinitions",
          "task",
          "interaction",
          "question",
          "pageObject",
          "locators"
        ],
        "notRequires": [],
        "rules": {
          "generateAll": true,
          "validateBusiness": true,
          "usePOM": false,
          "useScreenplay": true
        },
        "howToRequest": {
          "description": "Cómo estructurar correctamente la solicitud de una Historia de Usuario WEB completa",
          "requiredInfo": {
            "id": "Identificador de la HU (ej: WEB-HU-001)",
            "nombre": "Nombre descriptivo (ej: Búsqueda de producto en Amazon)",
            "baseUrl": "URL base de la aplicación (ej: https://www.amazon.com)",
            "paginas": "Lista de páginas involucradas (ej: HomePage, SearchResultsPage)",
            "selectores": "Locators de cada elemento (CSS, XPath, ID)",
            "acciones": "Acciones a realizar (navegarA, escribirEn, hacerClicEn)",
            "validaciones": "Qué se debe validar (visibilidad, texto, cantidad de elementos)",
            "framework": "Mencionar que debe usar Serenity Screenplay correctamente"
          },
          "templateRequest": "ID: {id}\nNombre: {nombre}\nPrioridad: {prioridad}\n\nSolicitud:\n- {descripcion_solicitud}\n\nEscenario:\n- {descripcion_escenario}\n\nPasos (con selectores):\n{pasos_detallados}\n\nInteracciones reutilizables:\n{interacciones}\n\nValidaciones:\n{validaciones}\n\nCriterios de aceptación:\n{criterios_gherkin}",
          "implementationGuide": {
            "description": "Guía paso a paso para implementar una HU WEB completa",
            "step1": {
              "phase": "Análisis y Diseño",
              "tasks": [
                "Identificar páginas involucradas",
                "Mapear elementos UI y locators",
                "Definir acciones de negocio (Tasks)",
                "Definir validaciones (Questions)",
                "Diseñar escenarios Gherkin"
              ]
            },
            "step2": {
              "phase": "Creación de Estructura",
              "order": [
                "1. UI Classes (Target locators)",
                "2. Questions (validaciones)",
                "3. Tasks (acciones de negocio)",
                "4. Interactions (si hay reutilización)",
                "5. StepDefinitions (orquestación)",
                "6. Feature files (escenarios)"
              ]
            },
            "step3": {
              "phase": "Configuración",
              "files": [
                "SetTheStage.java (@Before/@After)",
                "Runner.java con CucumberWithSerenity",
                "serenity.properties",
                "build.gradle o pom.xml"
              ]
            },
            "step4": {
              "phase": "Validación",
              "checks": [
                "Compilación exitosa",
                "Tests pasan",
                "Reportes Serenity generados",
                "Screenplay pattern seguido correctamente"
              ]
            }
          },
          "exampleComplete": {
            "id": "WEB-HU-003",
            "nombre": "Búsqueda de producto en la página de Amazon",
            "prioridad": "Alta",
            "solicitud": "Necesito implementar la búsqueda de un producto específico en Amazon desde la interfaz web, permitiendo que el usuario encuentre resultados relacionados de forma correcta.",
            "escenario": "El usuario ingresa a la página principal de Amazon. Debe existir una barra de búsqueda visible en la parte superior. Al ingresar un producto y ejecutar la búsqueda, deben mostrarse los resultados relevantes.",
            "pasos": [
              {
                "numero": 1,
                "descripcion": "El usuario ingresa a la página principal de Amazon",
                "selectores": [
                  {
                    "name": "logo",
                    "strategy": "id",
                    "value": "nav-logo-sprites",
                    "purpose": "confirmar carga"
                  },
                  {
                    "name": "searchBox",
                    "strategy": "id",
                    "value": "twotabsearchtextbox",
                    "purpose": "barra de búsqueda"
                  }
                ]
              },
              {
                "numero": 2,
                "descripcion": "El usuario digita el nombre del producto en la barra de búsqueda",
                "selectores": [
                  {
                    "name": "searchBox",
                    "strategy": "id",
                    "value": "twotabsearchtextbox",
                    "purpose": "campo para digitar"
                  },
                  {
                    "name": "searchButton",
                    "strategy": "id",
                    "value": "nav-search-submit-button",
                    "purpose": "botón buscar"
                  }
                ]
              },
              {
                "numero": 3,
                "descripcion": "El usuario ejecuta la búsqueda presionando el botón o Enter",
                "selectores": [
                  {
                    "name": "searchButton",
                    "strategy": "id",
                    "value": "nav-search-submit-button"
                  },
                  {
                    "name": "resultsContainer",
                    "strategy": "cssSelector",
                    "value": ".s-main-slot",
                    "purpose": "contenedor de resultados"
                  }
                ]
              },
              {
                "numero": 4,
                "descripcion": "El sistema muestra la página de resultados con el listado de productos",
                "selectores": [
                  {
                    "name": "resultItems",
                    "strategy": "cssSelector",
                    "value": ".s-main-slot .s-result-item"
                  },
                  {
                    "name": "productTitles",
                    "strategy": "cssSelector",
                    "value": ".a-size-medium",
                    "purpose": "títulos de resultados"
                  },
                  {
                    "name": "productImages",
                    "strategy": "cssSelector",
                    "value": ".s-image",
                    "purpose": "imágenes de productos"
                  }
                ]
              }
            ],
            "interacciones": [
              {
                "name": "AbrirPaginaWeb",
                "description": "Abre cualquier URL requerida",
                "selectores": []
              },
              {
                "name": "EscribirEnBarraDeBusqueda",
                "description": "Permite ingresar texto en la barra de búsqueda",
                "selectores": [
                  "#twotabsearchtextbox"
                ]
              },
              {
                "name": "EjecutarBusqueda",
                "description": "Realiza clic en el botón de buscar",
                "selectores": [
                  "#nav-search-submit-button"
                ]
              },
              {
                "name": "ValidarResultadosDeBusqueda",
                "description": "Verifica que existan resultados visibles y que correspondan al producto buscado",
                "selectores": [
                  ".s-main-slot .s-result-item",
                  ".a-size-medium"
                ]
              }
            ],
            "validaciones": [
              "La barra de búsqueda debe estar visible al cargar la página",
              "Al ingresar el texto, este debe reflejarse en el campo",
              "Deben aparecer resultados relacionados al producto ingresado",
              "Ningún resultado debe mostrarse vacío o sin título",
              "Debe existir al menos un elemento .s-result-item visible después de la búsqueda"
            ],
            "criterios": {
              "given": "\"Daniel\" ingresó a la página de Amazon",
              "when": "ingresa un producto en la barra de búsqueda y ejecuta la acción",
              "then": "los resultados relevantes del producto deben mostrarse correctamente en pantalla"
            },
            "artifactsToGenerate": [
              "Feature file (busqueda_amazon.feature)",
              "StepDefinitions (BusquedaAmazonStepDefinitions.java)",
              "Task (BuscarProductoEnAmazon.java)",
              "Interactions (NavegarA.java, EscribirEn.java, HacerClicEn.java)",
              "Questions (ElementoEsVisible.java, CantidadDeElementos.java, TextoDelElemento.java)",
              "UI Locators (HomePageUI.java, SearchResultsPageUI.java)",
              "Pages (HomePage.java, SearchResultsPage.java - opcional)"
            ]
          },
          "bestPractices": [
            "✅ Especificar SIEMPRE la URL completa de la aplicación",
            "✅ Listar TODOS los selectores con su estrategia (id, css, xpath)",
            "✅ Describir paso a paso el flujo del usuario",
            "✅ Incluir todas las validaciones esperadas",
            "✅ Mencionar 'Serenity Screenplay' para aplicar el estándar correcto",
            "✅ Preferir selectores estables (id > css > xpath)",
            "✅ Documentar el propósito de cada selector",
            "✅ Indicar los textos esperados en validaciones"
          ],
          "commonMistakes": [
            "❌ No especificar los selectores de los elementos",
            "❌ No indicar la estrategia del selector (css, id, xpath)",
            "❌ Decir solo 'validar la página' sin especificar qué",
            "❌ No mencionar la URL base",
            "❌ Solicitud ambigua como 'hacer un test de la web'",
            "❌ Usar selectores frágiles (xpath con índices absolutos)"
          ]
        }
      },
      "FEATURE": {
        "name": "Feature sin implementación",
        "description": "Solo archivo .feature sin implementación técnica",
        "requires": [
          "descripcion",
          "escenarios"
        ],
        "generates": [
          "feature"
        ],
        "notRequires": [
          "tasks",
          "interactions",
          "pages",
          "locators"
        ],
        "rules": {
          "featureOnly": true,
          "noImplementation": true
        }
      },
      "VALIDATION": {
        "name": "Validación de código",
        "description": "Validar código existente contra estándares",
        "requires": [
          "codigo",
          "tipo"
        ],
        "generates": [
          "validationReport"
        ],
        "notRequires": [
          "generation"
        ],
        "rules": {
          "validateOnly": true,
          "noGeneration": true
        }
      }
    }
  },
  "principles": {
    "screenplayFirst": {
      "enabled": true,
      "description": "Screenplay first - NO usar Page Object Model tradicional, NO lógica en step definitions",
      "forbidden": [
        "Page Object Model tradicional con métodos de página",
        "Lógica en step definitions",
        "@FindBy annotations en Pages"
      ],
      "required": [
        "Toda acción debe ser un Task, Interaction o Question",
        "Locators separados en clases UI estáticas",
        "Pages solo como contenedores de locators (opcional)"
      ]
    },
    "separationOfResponsibilities": {
      "enabled": true,
      "layers": {
        "feature": {
          "responsibility": "Lenguaje de negocio",
          "format": "Gherkin"
        },
        "stepDefinitions": {
          "responsibility": "Orquestación mínima",
          "maxLines": 3,
          "forbidden": [
            "Lógica",
            "Aserciones técnicas",
            "Interacciones directas con WebDriver"
          ]
        },
        "tasks": {
          "responsibility": "Acciones de alto nivel sobre la UI",
          "language": "Lenguaje de negocio",
          "forbidden": [
            "WebDriver directo"
          ]
        },
        "interactions": {
          "responsibility": "Acciones técnicas con WebDriver",
          "allowed": [
            "Click, SendKeys, WaitFor, etc."
          ],
          "forbidden": [
            "Aserciones"
          ]
        },
        "questions": {
          "responsibility": "Validaciones visuales",
          "mustReturn": "Boolean o valor del elemento"
        },
        "ui": {
          "responsibility": "Locators de elementos",
          "dataOnly": true,
          "forbidden": [
            "Lógica",
            "Métodos de acción"
          ]
        },
        "pages": {
          "responsibility": "Agrupación opcional de locators por página",
          "optional": true,
          "forbidden": [
            "Lógica de navegación",
            "Acciones"
          ]
        }
      }
    }
  },
  "projectStructure": {
    "mandatory": true,
    "projectName": {
      "pattern": "com.{proyecto}.web",
      "description": "El nombre del proyecto sigue el patrón com.{proyecto}.web",
      "examples": [
        "com.screenplay.web",
        "com.amazon.web",
        "com.mercadolibre.web",
        "com.google.web"
      ],
      "rule": "Extraer {proyecto} del paquete base (ej: 'com.amazon.web' → proyecto = 'amazon')"
    },
  "dualPackageStructure": {
    "description": "Estructura recomendada con paquetes separados para código y tests",
    "mainCode": "com.screenplay.web (Tasks, Questions, UI)",
    "testCode": "com.sistecredito.web (StepDefinitions, Runners, Conf)",
    "benefit": "Separación clara entre código de automatización y código de testing",
    "mappingRules": {
      "description": "Cómo mapear entre paquetes para una HU específica",
      "exampleHU": "HU-001 Búsqueda de Producto",
      "mapping": {
        "UI Classes": "com.screenplay.web.userinterfaces.UIAmazon",
        "Tasks": "com.screenplay.web.tasks.BuscarProducto",
        "Questions": "com.screenplay.web.questions.ElementoEsVisible",
        "StepDefinitions": "com.sistecredito.web.stepdefinitions.AmazonBusquedaStepDefinitions",
        "Runner": "com.sistecredito.web.runners.AmazonRunner",
        "Conf": "com.sistecredito.web.conf.SetTheStage"
      },
      "packageNaming": {
        "mainPackage": "com.screenplay.web",
        "testPackage": "com.sistecredito.web",
        "gluePattern": "com.sistecredito.web.stepdefinitions,com.sistecredito.web.conf"
      }
    }
  },
    "buildTools": {
      "supported": [
        "Gradle",
        "Maven"
      ],
      "description": "El proyecto puede usar Gradle o Maven como herramienta de build"
    },
    "rootFiles": {
      "gradle": {
        "build.gradle": {
          "mandatory": true,
          "description": "Archivo de configuración de Gradle",
          "template": "plugins {\n    id 'java'\n    id 'net.serenity-bdd.serenity-gradle-plugin' version '4.2.8'\n}\n\ngroup = 'com.{proyecto}.web'\nversion = '1.0.0'\nsourceCompatibility = '11'\n\ntasks.register('aggregate') {\n    group = 'verification'\n    description = 'Generates Serenity aggregate reports'\n    dependsOn = ['test']\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    // Serenity BDD Core\n    implementation 'net.serenity-bdd:serenity-core:5.0.5'\n    implementation 'net.serenity-bdd:serenity-screenplay:5.0.5'\n    implementation 'net.serenity-bdd:serenity-screenplay-webdriver:5.0.5'\n    implementation 'net.serenity-bdd:serenity-ensure:5.0.5'\n\n    // Selenium WebDriver\n    implementation 'org.seleniumhq.selenium:selenium-java:4.39.0'\n\n    // Cucumber con Serenity\n    testImplementation 'net.serenity-bdd:serenity-cucumber:5.0.5'\n    testImplementation 'io.cucumber:cucumber-java:7.20.1'\n    testImplementation 'io.cucumber:cucumber-junit:7.20.1'\n\n    // JUnit 4 para el runner\n    testImplementation 'junit:junit:4.13.2'\n\n    // Logging\n    implementation 'org.slf4j:slf4j-simple:2.0.16'\n\n    // Utilidades adicionales\n    implementation 'org.assertj:assertj-core:3.24.2'\n    implementation 'com.google.guava:guava:32.1.2-jre'\n}\n\ntest {\n    systemProperty \"cucumber.filter.tags\", System.getProperty(\"cucumber.filter.tags\")\n    systemProperty \"cucumber.publish.enabled\", \"true\"\n    systemProperty \"cucumber.publish.quiet\", \"true\"\n}\n\nserenity {\n    reports = ['single-page-html']\n    outputDirectory = file('target/site/serenity')\n}"
        },
        "settings.gradle": {
          "mandatory": true,
          "description": "Configuración del nombre del proyecto",
          "template": "rootProject.name = 'com.{proyecto}.web'"
        },
        "gradle.properties": {
          "optional": true,
          "template": "org.gradle.daemon=true\norg.gradle.parallel=true\norg.gradle.caching=true"
        }
      },
      "maven": {
        "pom.xml": {
          "mandatory": true,
          "description": "Archivo de configuración de Maven",
          "template": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.{proyecto}.web</groupId>\n    <artifactId>com.{proyecto}.web</artifactId>\n    <version>1.0.0</version>\n\n    <properties>\n        <maven.compiler.source>11</maven.compiler.source>\n        <maven.compiler.target>11</maven.compiler.target>\n        <serenity.version>5.0.5</serenity.version>\n        <cucumber.version>7.20.1</cucumber.version>\n        <selenium.version>4.39.0</selenium.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-core</artifactId>\n            <version>${serenity.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay</artifactId>\n            <version>${serenity.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay-webdriver</artifactId>\n            <version>${serenity.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-ensure</artifactId>\n            <version>${serenity.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>org.seleniumhq.selenium</groupId>\n            <artifactId>selenium-java</artifactId>\n            <version>${selenium.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-cucumber</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>io.cucumber</groupId>\n            <artifactId>cucumber-java</artifactId>\n            <version>${cucumber.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>io.cucumber</groupId>\n            <artifactId>cucumber-junit</artifactId>\n            <version>${cucumber.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>4.13.2</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>slf4j-simple</artifactId>\n            <version>2.0.16</version>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>net.serenity-bdd.maven.plugins</groupId>\n                <artifactId>serenity-maven-plugin</artifactId>\n                <version>${serenity.version}</version>\n                <executions>\n                    <execution>\n                        <id>serenity-reports</id>\n                        <phase>post-integration-test</phase>\n                        <goals>\n                            <goal>aggregate</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n</project>"
        }
      },
      "gitignore": {
        "mandatory": true,
        "description": ".gitignore para excluir archivos generados",
        "template": "# Gradle\n.gradle/\nbuild/\n\n# Maven\ntarget/\n\n# IntelliJ IDEA\n.idea/\n*.iml\n*.iws\n\n# Eclipse\n.classpath\n.project\n.settings/\n\n# Serenity\nserenity-reports/\n\n# Logs\n*.log\n\n# OS\n.DS_Store\nThumbs.db"
      },
      "README.md": {
        "optional": true,
        "template": "# {Proyecto} Web Automation\n\nProyecto de automatización web usando Serenity BDD + Screenplay + Selenium WebDriver\n\n## Ejecutar Tests\n\n### Gradle\n```bash\ngradle clean test aggregate\n```\n\n### Maven\n```bash\nmvn clean verify\n```\n\n## Ver Reportes\nAbrir `target/site/serenity/index.html`"
      }
    },
    "basePackage": "com.{proyecto}.web",
    "example": "com.amazon.web, com.mercadolibre.web, com.google.web",
    "sourceStructure": {
      "src/main/java/com/{proyecto}/web/": {
        "tasks/": {
          "description": "Tareas de negocio de alto nivel para la UI",
          "naming": "{Action}{Target}.java",
          "examples": [
            "BuscarProducto.java",
            "IniciarSesion.java",
            "AgregarAlCarrito.java",
            "CompletarFormulario.java"
          ]
        },
        "interactions/": {
          "description": "Acciones técnicas con WebDriver (Click, Type, WaitFor, Navigate)",
          "naming": "{Action}En.java o {Action}.java",
          "examples": [
            "HacerClicEn.java",
            "EscribirEn.java",
            "NavegarA.java",
            "EsperarElemento.java",
            "SeleccionarOpcion.java"
          ]
        },
        "questions/": {
          "description": "Validaciones que retornan valores de elementos UI",
          "naming": "{What}Es{Condition}.java o {What}De{Element}.java",
          "examples": [
            "ElementoEsVisible.java",
            "TextoDelElemento.java",
            "CantidadDeElementos.java",
            "ElementoEstaHabilitado.java"
          ]
        },
        "userinterfaces/": {
          "description": "Locators organizados por página (solo Target locators)",
          "naming": "UI{PageName}.java",
          "examples": [
            "UIHome.java",
            "UISearchResults.java",
            "UILogin.java"
          ],
          "content": "public static final Target SELECTOR = Target.the(\"descripción\").locatedBy(\"selector\");",
          "note": "IMPORTANTE: Carpeta se llama 'userinterfaces' (todo junto, minúsculas), clases con prefijo UI"
        },
        "utils/": {
          "description": "Código de utilidades (opcional)",
          "naming": "{Utility}.java",
          "examples": [
            "Constants.java",
            "WaitHelper.java",
            "ScreenshotHelper.java"
          ]
        }
      },
      "src/test/java/com/{proyecto}/web/": {
        "conf/": {
          "description": "Configuración inicial del escenario (OnStage setup)",
          "naming": "SetTheStage.java",
          "mandatory": true,
          "content": "Clase para configurar OnStage.setTheStage() antes de los tests",
          "note": "Centraliza la inicialización del escenario para todos los tests"
        },
        "stepdefinitions/": {
          "description": "Step Definitions - Glue code Cucumber (máx 3 líneas por método)",
          "naming": "{Feature}StepDefinitions.java",
          "examples": [
            "BusquedaStepDefinitions.java",
            "LoginStepDefinitions.java"
          ]
        },
        "runners/": {
          "description": "Runners - Ejecutores de tests",
          "naming": "{Feature}Runner.java",
          "examples": [
            "AcceptanceTestRunner.java",
            "BusquedaRunner.java"
          ]
        }
      },
      "src/test/resources/": {
        "features/": {
          "description": "Feature files - Escenarios Gherkin",
          "naming": "{feature}.feature",
          "examples": [
            "busqueda_producto.feature",
            "inicio_sesion.feature"
          ]
        },
        "cucumber.properties": "Configuración de Cucumber",
        "serenity.properties": {
          "mandatory": true,
          "description": "Configuración de Serenity BDD + WebDriver (DEBE ser serenity.properties, NO serenity.conf)",
          "note": "Archivo DEBE llamarse 'serenity.properties' para que Serenity lo detecte automáticamente"
        }
      }
    },
    "notes": [
      "PROYECTO: Nombre del proyecto DEBE ser com.{proyecto}.web según el 'Paquete base' del requerimiento",
      "ESTRUCTURA COMPLETA: Crear build.gradle O pom.xml, settings.gradle, .gitignore, README.md",
      "DIRECTORIOS FÍSICOS OBLIGATORIOS: Crear TODAS las carpetas del paquete base incluyendo 'web'",
      "Package base DEBE incluir 'web': com.{proyecto}.web (ej: com.amazon.web)",
      "EJEMPLO AMAZON: Crear carpetas src/main/java/com/amazon/web/ y src/test/java/com/amazon/web/",
      "userinterfaces/ contiene SOLO Target locators con PageObject",
      "conf/ contiene SetTheStage.java para inicialización del escenario",
      "interactions/ SOLO para comportamientos repetitivos (modales, menús reutilizables)",
      "tasks/ contienen acciones directas: Enter, Click, WaitUntil",
      "cucumber.properties es el archivo de configuración principal",
      "serenity.properties (NO serenity.conf) DEBE configurar webdriver (chrome, firefox, edge)",
      "build.gradle o pom.xml DEBE incluir TODAS las dependencias: serenity-core, serenity-screenplay, serenity-screenplay-webdriver, serenity-ensure, selenium-java, serenity-cucumber, cucumber-java, cucumber-junit, junit, slf4j-simple",
      "Order: tasks -> interactions -> questions -> userinterfaces -> utils"
    ],
    "mandatoryDirectories": {
      "description": "Directorios que DEBEN ser creados físicamente en el sistema de archivos",
      "root": [
        ".gradle/",
        "gradle/",
        "target/"
      ],
      "source": [
        "src/",
        "src/main/",
        "src/main/java/",
        "src/main/java/com/",
        "src/main/java/com/{proyecto}/",
        "src/main/java/com/{proyecto}/web/",
        "src/main/java/com/{proyecto}/web/tasks/",
        "src/main/java/com/{proyecto}/web/interactions/",
        "src/main/java/com/{proyecto}/web/questions/",
        "src/main/java/com/{proyecto}/web/userinterfaces/",
        "src/main/java/com/{proyecto}/web/utils/"
      ],
      "test": [
        "src/test/",
        "src/test/java/",
        "src/test/java/com/",
        "src/test/java/com/{proyecto}/",
        "src/test/java/com/{proyecto}/web/",
        "src/test/java/com/{proyecto}/web/conf/",
        "src/test/java/com/{proyecto}/web/stepdefinitions/",
        "src/test/java/com/{proyecto}/web/runners/"
      ],
      "resources": [
        "src/test/resources/",
        "src/test/resources/features/"
      ],
      "example": "Para 'Paquete base: com.amazon.web' crear: src/main/java/com/amazon/web/tasks/, src/test/java/com/amazon/web/conf/, etc."
    }
  },
  "namingConventions": {
    "language": {
      "rule": "TODO en ESPAÑOL excepto nombres del framework y dependencias externas",
      "inSpanish": [
        "Nombres de clases personalizadas (Tasks, Interactions, Questions, UserInterfaces)",
        "Nombres de métodos propios",
        "Variables locales",
        "Comentarios y documentación",
        "Mensajes de validación y excepciones",
        "Nombres de packages personalizados (com.empresa.web)"
      ],
      "inEnglish": [
        "Palabras clave del framework: Task, Interaction, Question, Actor",
        "Métodos del framework: performAs(), answeredBy(), attemptsTo()",
        "Clases de Serenity: BrowseTheWeb, Open, Click, Enter",
        "Selenium WebDriver: By, WebElement, WebDriver",
        "Anotaciones: @Step, @When, @Then, @Given",
        "Imports de librerías externas",
        "Acciones: Click, Enter, WaitUntil, Open"
      ],
      "examples": {
        "taskName": {
          "incorrect": "SearchProduct",
          "correct": "BuscarProducto",
          "reason": "Nombres propios deben estar en español"
        },
        "interactionName": {
          "incorrect": "ClickOn",
          "correct": "HacerClicEn",
          "reason": "Interacciones propias en español"
        },
        "questionName": {
          "incorrect": "IsVisible",
          "correct": "EsVisible o ElementoEsVisible",
          "reason": "Questions en español"
        },
        "uiLocator": {
          "correct": "public static final Target TXT_BUSQUEDA = Target.the(\"Input busqueda\").locatedBy(\"//input[@id='search-box']\");",
          "reason": "Usar Target con descripción legible, prefijos en nombres de constantes",
          "package": "com.{company}.web.userinterfaces"
        },
        "uiConstantPrefixes": {
          "TXT_": "Inputs de texto",
          "BTN_": "Botones",
          "LBL_": "Labels y textos",
          "DDL_": "Dropdowns",
          "CHK_": "Checkboxes",
          "LNK_": "Links",
          "IMG_": "Imágenes"
        }
      }
    },
    "tasks": {
      "pattern": "Verbo en infinitivo + Complemento en español",
      "examples": [
        "BuscarProducto",
        "IniciarSesion",
        "AgregarAlCarrito",
        "CompletarFormulario",
        "SeleccionarOpcion"
      ],
      "format": "PascalCase",
      "factoryMethod": "con(), en(), desde(), para()",
      "fullExample": {
        "className": "BuscarProducto",
        "factoryMethod": "enAmazon(String producto)",
        "usage": "BuscarProducto.enAmazon(\"laptop\")"
      }
    },
    "interactions": {
      "pattern": "Acción técnica + Complemento",
      "examples": [
        "HacerClicEn",
        "EscribirEn",
        "NavegarA",
        "EsperarElemento",
        "SeleccionarDeLista"
      ],
      "format": "PascalCase",
      "factoryMethod": "el(), la(), los(), hacia()",
      "fullExample": {
        "className": "HacerClicEn",
        "factoryMethod": "el(Target target)",
        "usage": "HacerClicEn.el(UIAmazon.BTN_BUSCAR)"
      }
    }
  },
  "questions": {
    "pattern": "Qué + Es/De + Complemento",
    "examples": [
      "ElementoEsVisible",
      "TextoDelElemento",
      "CantidadDeElementos",
      "ElementoEstaHabilitado",
      "ValorDelCampo"
    ],
    "mustReturn": true,
    "format": "PascalCase",
    "factoryMethod": "del(), de(), en()",
    "fullExample": {
      "className": "ElementoEsVisible",
      "factoryMethod": "en(Target target)",
      "usage": "ElementoEsVisible.en(UISearchResults.LBL_RESULTADOS)"
    },
    "rules": [
      "Implementa Question<T>",
      "Debe retornar un valor del UI",
      "Sin lógica compleja",
      "Método estático para construcción"
    ],
    "common": [
      {
        "name": "ElementoEsVisible",
        "returns": "Boolean",
        "description": "Verifica si un elemento es visible"
      },
      {
        "name": "TextoDelElemento",
        "returns": "String",
        "description": "Obtiene el texto de un elemento"
      },
      {
        "name": "CantidadDeElementos",
        "returns": "Integer",
        "description": "Cuenta elementos que coinciden con el locator"
      },
      {
        "name": "ElementoEstaHabilitado",
        "returns": "Boolean",
        "description": "Verifica si un elemento está habilitado"
      },
      {
        "name": "ValorDelCampo",
        "returns": "String",
        "description": "Obtiene el valor de un input"
      }
    ],
    "template": "public class {QuestionName} implements Question<{ReturnType}> {\n    private final By locator;\n    \n    public {QuestionName}(By locator) {\n        this.locator = locator;\n    }\n    \n    @Step(\"{0} verifica {QuestionName}\")\n    @Override\n    public {ReturnType} answeredBy(Actor actor) {\n        return BrowseTheWeb.as(actor).find(locator).{method}();\n    }\n    \n    public static {QuestionName} en(By locator) {\n        return new {QuestionName}(locator);\n    }\n}",
    "serenityQuestions": {
      "description": "Questions nativas de Serenity que puedes usar",
      "visibility": "Text.of(locator).asString()",
      "presence": "Presence.of(locator)",
      "enabled": "Enabled.of(locator)",
      "value": "Value.of(locator).asString()",
      "text": "Text.of(locator).asString()"
    }
  },
  "userinterfaces": {
    "className": "Pattern: UI{PageName}",
    "package": "com.{company}.web.userinterfaces",
    "examples": [
      "UIAmazon",
      "UISearchResults",
      "UILogin"
    ],
    "format": "PascalCase con prefijo UI",
    "extends": "PageObject",
    "annotation": "@DefaultUrl para URL base de la página",
    "constants": "En MAYUSCULAS con guiones bajos: TXT_BUSQUEDA, BTN_BUSCAR, LBL_RESULTADOS",
    "constantType": "public static final Target",
    "fullExample": {
      "className": "UIAmazon",
      "package": "com.sistecredito.web.userinterfaces",
      "constant": "public static final Target TXT_BUSQUEDA = Target.the(\"Input busqueda\").locatedBy(\"//input[@id='twotabsearchtextbox']\");",
      "usage": "actor.attemptsTo(Click.on(UIAmazon.TXT_BUSQUEDA))"
    },
    "note": "Carpeta 'userinterfaces' (todo junto, minúsculas) NO 'ui'. DEBE extender PageObject y usar Target"
  },
  "pages": {
    "optional": true,
    "pattern": "Nombre de la página",
    "examples": [
      "HomePage",
      "SearchResultsPage",
      "LoginPage"
    ],
    "format": "PascalCase",
    "note": "Pages en Screenplay son opcionales. Solo como agrupadores de UI."
  },
  "stepDefinitions": {
    "pattern": "Nombre del Feature + DefinicionesDePasos o StepDefinitions",
    "examples": [
      "BusquedaStepDefinitions",
      "LoginStepDefinitions",
      "CarritoDefinicionesDePasos"
    ],
    "format": "PascalCase",
    "methods": "Nombres descriptivos en español: elUsuarioBuscaUnProducto()",
    "rules": [
      "Máximo 3 líneas",
      "No lógica",
      "No aserciones técnicas",
      "Solo orquestación"
    ],
    "template": "@{Cucumber}(\"{text}\")\npublic void {methodName}({params}) {\n    theActorInTheSpotlight()\n        .attemptsTo({Task}.con({param}));\n}",
    "validationTemplate": "@Then(\"{validation text}\")\npublic void {methodName}() {\n    theActorInTheSpotlight()\n        .should(seeThat({Question}.en({Locator}), equalTo(true)));\n}"
  },
  "standards": {
    "userinterfaces": {
      "className": "Pattern: UI{PageName}",
      "package": "com.{company}.web.userinterfaces",
      "example": "UIAmazon",
      "extends": "net.serenitybdd.core.pages.PageObject",
      "rules": [
        "DEBE extender PageObject",
        "SOLO contiene Target locators (NO usar By)",
        "Nombres de constantes en MAYUSCULAS_CON_GUIONES con prefijos: TXT_, BTN_, LBL_, etc.",
        "Usar la estrategia más estable: id > name > css > xpath",
        "Cada locator debe ser public static final Target",
        "Target.the(\"descripción\").locatedBy(\"selector\")",
        "Usar @DefaultUrl para definir la URL base de la página",
        "NO métodos de acción aquí",
        "Carpeta 'userinterfaces' (todo junto, minúsculas)"
      ],
      "template": "package com.{company}.web.userinterfaces;\n\nimport net.serenitybdd.annotations.DefaultUrl;\nimport net.serenitybdd.core.pages.PageObject;\nimport net.serenitybdd.screenplay.targets.Target;\n\n@DefaultUrl(\"https://www.{sitio}.com\")\npublic class UI{PageName} extends PageObject {\n\n    public static final Target TXT_CAMPO = Target.the(\"Input de campo\").locatedBy(\"//input[@id='campo']\");\n    public static final Target BTN_ACCION = Target.the(\"Botón de acción\").locatedBy(\"//button[@id='accion']\");\n    public static final Target LBL_RESULTADO = Target.the(\"Label resultado\").locatedBy(\"//div[@class='resultado']\");\n}",
      "selectorStrategies": [
        {
          "strategy": "id",
          "priority": 1,
          "example": "Target.the(\"Campo busqueda\").locatedBy(\"#search-box\")",
          "stability": "Alta"
        },
        {
          "strategy": "name",
          "priority": 2,
          "example": "Target.the(\"Input usuario\").locatedBy(\"[name='username']\")",
          "stability": "Alta"
        },
        {
          "strategy": "cssSelector",
          "priority": 3,
          "example": "Target.the(\"Resultado\").locatedBy(\".result-item\")",
          "stability": "Media"
        },
        {
          "strategy": "xpath",
          "priority": 4,
          "example": "Target.the(\"Contenedor\").locatedBy(\"//div[@class='container']\")",
          "stability": "Baja"
        }
      ],
      "constantPrefixes": {
        "TXT_": "Para inputs de texto",
        "BTN_": "Para botones",
        "LBL_": "Para labels y textos",
        "DDL_": "Para dropdowns",
        "CHK_": "Para checkboxes",
        "RDB_": "Para radio buttons",
        "LNK_": "Para links",
        "IMG_": "Para imágenes",
        "TBL_": "Para tablas"
      }
    },
    "conf": {
      "className": "SetTheStage",
      "package": "com.{company}.web.conf",
      "mandatory": true,
      "description": "Configuración centralizada para inicializar y cerrar el escenario OnStage",
      "template": "package com.{company}.web.conf;\n\nimport io.cucumber.java.Before;\nimport io.cucumber.java.After;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.actors.OnlineCast;\n\npublic class SetTheStage {\n    \n    @Before\n    public void setTheStage() {\n        OnStage.setTheStage(new OnlineCast());\n    }\n    \n    @After\n    public void tearDown() {\n        OnStage.drawTheCurtain();\n    }\n}",
      "usage": "Se ejecuta automáticamente antes y después de cada escenario",
      "note": "NO necesita ser importado en StepDefinitions - Cucumber lo detecta automáticamente",
      "hooks": {
        "before": "setTheStage() - Inicializa OnStage con OnlineCast",
        "after": "tearDown() - Cierra actores y limpia recursos con drawTheCurtain()"
      }
    },
    "interactions": {
      "description": "SOLO para comportamientos repetitivos que aparecen en múltiples flujos (ej: formulario modal que se usa en 3 Tasks diferentes)",
      "whenToUse": "Cuando un conjunto de acciones se repite en varios flujos de negocio",
      "whenNotToUse": "Para acciones simples - usar acciones de Serenity directamente en Tasks (Enter, Click, WaitUntil)",
      "rules": [
        "SOLO para comportamientos repetitivos entre múltiples Tasks",
        "Sin aserciones",
        "Implementa Interaction",
        "Método estático para construcción con Instrumented.instanceOf().withProperties()",
        "Recibe Target o modelos de datos"
      ],
      "common": [
        "FormularioModal (se usa en 3 flujos)",
        "MenuNavegacion (se usa en múltiples Tasks)",
        "FiltrosBusqueda (se usa en varios flujos)"
      ],
      "template": "package com.{company}.web.interactions;\n\nimport net.serenitybdd.core.steps.Instrumented;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Interaction;\nimport net.serenitybdd.screenplay.actions.Enter;\nimport net.serenitybdd.screenplay.actions.Click;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\nimport net.serenitybdd.screenplay.matchers.WebElementStateMatchers;\nimport com.{company}.web.models.DatosFormulario;\nimport static com.{company}.web.userinterfaces.UI{Page}.*;\n\npublic class {InteractionName} implements Interaction {\n    \n    private DatosFormulario datos;\n    \n    public {InteractionName}(DatosFormulario datos) {\n        this.datos = datos;\n    }\n    \n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            WaitUntil.the(TXT_CAMPO, WebElementStateMatchers.isVisible()).forNoMoreThan(120).seconds(),\n            Enter.theValue(datos.getValor()).into(TXT_CAMPO),\n            Click.on(BTN_CONFIRMAR)\n        );\n    }\n    \n    public static {InteractionName} con(DatosFormulario datos) {\n        return Instrumented.instanceOf({InteractionName}.class).withProperties(datos);\n    }\n}",
      "serenityActions": {
        "description": "Acciones nativas de Serenity que puedes usar dentro de Interactions (aceptan Target)",
        "click": "Click.on(target)",
        "enter": "Enter.theValue(text).into(target)",
        "sendKeys": "SendKeys.of(keys).into(target)",
        "clear": "Clear.field(target)",
        "select": "SelectFromOptions.byVisibleText(text).from(target)",
        "open": "Open.url(url)",
        "waitFor": "WaitUntil.the(target, WebElementStateMatchers.isVisible())"
      }
    },
    "tasks": {
      "description": "Flujos de negocio que pueden contener acciones directas de Serenity (Enter, Click, WaitUntil) o llamar Interactions reutilizables",
      "rules": [
        "Lenguaje de negocio",
        "Puede contener acciones directas: Enter.theValue().into(), Click.on(), WaitUntil.the()",
        "Puede orquestar Interactions solo si son comportamientos repetitivos",
        "Reutilizable",
        "Implementa Task",
        "Método estático para construcción con Tasks.instrumented()",
        "Para navegar: usar Open.browserOn(uiPageObject) donde uiPageObject tiene @DefaultUrl"
      ],
      "templates": {
        "navegacion": "package com.{company}.web.tasks;\n\nimport com.{company}.web.userinterfaces.UI{Page};\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.Tasks;\nimport net.serenitybdd.screenplay.actions.Open;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\nimport static com.{company}.web.userinterfaces.UI{Page}.*;\nimport static net.serenitybdd.screenplay.matchers.WebElementStateMatchers.isClickable;\n\npublic class AbrirPagina implements Task {\n    \n    private UI{Page} uiPage;\n    \n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.wasAbleTo(\n            Open.browserOn(uiPage),\n            WaitUntil.the(TXT_ELEMENTO_PRINCIPAL, isClickable()).forNoMoreThan(120).seconds()\n        );\n    }\n    \n    public static AbrirPagina en{Page}() {\n        return new AbrirPagina();\n    }\n}",
        "conAccionesDirectas": "package com.{company}.web.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.Tasks;\nimport net.serenitybdd.screenplay.actions.Click;\nimport net.serenitybdd.screenplay.actions.Enter;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\nimport static com.{company}.web.userinterfaces.UI{Page}.*;\nimport static net.serenitybdd.screenplay.matchers.WebElementStateMatchers.isClickable;\n\npublic class {TaskName} implements Task {\n    \n    private String parametro;\n    \n    public {TaskName}(String parametro) {\n        this.parametro = parametro;\n    }\n    \n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Enter.theValue(parametro).into(TXT_CAMPO),\n            Click.on(BTN_ACCION),\n            WaitUntil.the(LBL_RESULTADO, isClickable()).forNoMoreThan(120).seconds()\n        );\n    }\n    \n    public static {TaskName} con(String parametro) {\n        return Tasks.instrumented({TaskName}.class, parametro);\n    }\n}",
        "conInteraction": "package com.{company}.web.tasks;\n\nimport com.{company}.web.interactions.FormularioModal;\nimport com.{company}.web.models.Datos;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.Tasks;\nimport net.serenitybdd.screenplay.actions.Click;\nimport static com.{company}.web.userinterfaces.UI{Page}.*;\n\npublic class {TaskName} implements Task {\n    \n    private Datos datos;\n    \n    public {TaskName}(Datos datos) {\n        this.datos = datos;\n    }\n    \n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Click.on(BTN_ABRIR_MODAL),\n            FormularioModal.con(datos),  // Interaction reutilizable\n            Click.on(BTN_CONFIRMAR)\n        );\n    }\n    \n    public static {TaskName} con(Datos datos) {\n        return Tasks.instrumented({TaskName}.class, datos);\n    }\n}"
      }
    },

    "questions": {
      "package": "com.screenplay.web.questions",
      "rules": [
        "Devuelven un tipo concreto (Boolean, String, Integer, ...)",
        "Pueden incluir WaitUntil dentro de answeredBy para sincronización visible",
        "Factory methods estáticos para construcción"
      ],
      "template": "package com.screenplay.web.questions;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.matchers.WebElementStateMatchers;\nimport net.serenitybdd.screenplay.targets.Target;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\n\npublic class VerificarElemento implements Question<Boolean> {\n\n    private final Target target;\n\n    public VerificarElemento(Target target) { this.target = target; }\n\n    @Override\n    public Boolean answeredBy(Actor actor) {\n        actor.attemptsTo( WaitUntil.the(target, WebElementStateMatchers.isVisible()).forNoMoreThan(120).seconds() );\n        return target.resolveFor(actor).isVisible();\n    }\n\n    public static VerificarElemento as(Target target) {\n        return new VerificarElemento(target);\n    }\n}",
      "commonQuestions": [
        {
          "name": "VerificarElemento",
          "returns": "Boolean",
          "description": "Verifica si un elemento es visible",
          "usage": "VerificarElemento.as(UIAmazon.LBL_RESULTADOS)"
        },
        {
          "name": "TextoDelElemento",
          "returns": "String",
          "description": "Obtiene el texto de un elemento",
          "usage": "TextoDelElemento.de(UIAmazon.LBL_RESULTADO)"
        },
        {
          "name": "CantidadDeElementos",
          "returns": "Integer",
          "description": "Cuenta elementos que coinciden con el locator",
          "usage": "CantidadDeElementos.en(UIAmazon.RESULTADOS)"
        }
      ]
    },

    "stepDefinitions": {
      "package": "com.sistecredito.web.stepdefinitions",
      "language": "en",
      "rules": ["Solo orquestación (sin lógica técnica)", "Usar anotaciones en inglés", "Máximo 3-5 líneas por método"],
      "template": "package com.sistecredito.web.stepdefinitions;\n\nimport static net.serenitybdd.screenplay.actors.OnStage.*;\nimport static net.serenitybdd.screenplay.GivenWhenThen.seeThat;\nimport static org.hamcrest.Matchers.is;\n\nimport io.cucumber.java.en.Given;\nimport io.cucumber.java.en.When;\nimport io.cucumber.java.en.Then;\n\nimport com.screenplay.web.tasks.AbrirPaginaWeb;\nimport com.screenplay.web.tasks.BuscarProducto;\nimport com.screenplay.web.questions.VerificarElemento;\nimport com.screenplay.web.userInterfaces.UIAmazon;\n\npublic class AmazonBusquedaStepdefinitions {\n\n    @Given(\"que {string} se encuentra en la pagina web\")\n    public void abrirHome(String actor) {\n        theActorCalled(actor).wasAbleTo( AbrirPaginaWeb.enAmazon() );\n    }\n\n    @When(\"busca el producto {string}\")\n    public void buscarProducto(String producto) {\n        theActorInTheSpotlight().attemptsTo( BuscarProducto.llamado(producto) );\n    }\n\n    @Then(\"se visualizan resultados\")\n    public void validarResultados() {\n        theActorInTheSpotlight().should( seeThat( VerificarElemento.as(UIAmazon.LBL_RESULTADOS), is(true) ) );\n    }\n}",
      "naming": "{Feature}Stepdefinitions.java",
      "imports": [
        "io.cucumber.java.en.*",
        "net.serenitybdd.screenplay.actors.OnStage",
        "net.serenitybdd.screenplay.GivenWhenThen",
        "org.hamcrest.Matchers"
      ]
    },

    "runner": {
      "package": "com.sistecredito.web.runners",
      "template": "package com.sistecredito.web.runners;\n\nimport io.cucumber.junit.CucumberOptions;\nimport net.serenitybdd.cucumber.CucumberWithSerenity;\nimport org.junit.runner.RunWith;\n\n@RunWith(CucumberWithSerenity.class)\n@CucumberOptions(\n    snippets = CucumberOptions.SnippetType.CAMELCASE,\n    features = \"src/test/resources/features/\",\n    tags = \"@smokTest\",\n    glue = {\"com.sistecredito.web.stepdefinitions\",\"com.sistecredito.web.conf\"},\n    plugin = {\"pretty\", \"json:target/cucumber-reports/cucumber.json\"},\n    publish = true\n)\npublic class Runner {}\n",
      "rules": [
        "Usa CucumberWithSerenity",
        "Glue apunta a stepdefinitions y conf",
        "Tags configurables",
        "Snippets en CamelCase"
      ]
    }
  },

  "validations": {
    "description": "Validaciones específicas para asegurar cumplimiento del estándar Screenplay",
    "screenplayCompliance": {
      "description": "Validaciones críticas para asegurar Screenplay pattern",
      "noPageObjectModel": {
        "description": "NO usar Page Object Model tradicional",
        "forbidden": ["@FindBy", "PageFactory.initElements", "métodos de acción en UI classes"],
        "error": "❌ PAGE OBJECT: Detectado uso de Page Object Model - usar Screenplay puro"
      },
      "noWebDriverDirect": {
        "description": "NO usar WebDriver directamente en Tasks/StepDefinitions",
        "forbidden": ["WebDriver", "driver.", "ChromeDriver", "FirefoxDriver"],
        "allowed": ["BrowseTheWeb (solo en Questions si es necesario)"],
        "error": "❌ WEBDRIVER: Uso directo de WebDriver detectado - usar Actions de Serenity"
      },
      "noStepsAnnotation": {
        "description": "NO usar @Steps annotation",
        "forbidden": ["@Steps", "Steps.instantiate"],
        "error": "❌ STEPS: @Steps annotation detectada - viola Screenplay pattern"
      },
      "noLogicInStepDefinitions": {
        "description": "StepDefinitions solo orquestación, máximo 5 líneas",
        "maxLines": 5,
        "forbidden": ["if (", "for (", "while (", "try {", "catch"],
        "error": "❌ LOGIC: Lógica compleja en StepDefinitions - mover a Tasks/Questions"
      },
      "mandatoryInstrumented": {
        "description": "Tasks/Interactions DEBEN usar Tasks.instrumented()",
        "mustContain": ["Tasks.instrumented("],
        "forbidden": ["new Task(", "new Interaction("],
        "error": "❌ INSTRUMENTED: Task/Interaction sin instrumented() - usar Tasks.instrumented()"
      },
      "publicConstructors": {
        "description": "Tasks/Interactions requieren constructor público",
        "forbidden": ["private Task(", "private Interaction("],
        "error": "❌ CONSTRUCTOR: Constructor privado detectado - debe ser público para ByteBuddy"
      },
      "questionsReturnValues": {
        "description": "Questions deben retornar valores, no hacer aserciones",
        "mustImplement": "Question<T>",
        "forbidden": ["assert", "should(", ".click()", ".sendKeys("],
        "error": "❌ QUESTION: Question hace acciones o aserciones - solo debe retornar valores"
      }
    },
    "structureValidations": {
      "navigation": {
        "singleTask": {
          "description": "Debe existir exactamente una Task de navegación",
          "class": "com.screenplay.web.tasks.AbrirPaginaWeb",
          "unique": true,
          "mustContain": ["Open.browserOn(", "WaitUntil.the("]
        }
      },
      "userInterfaces": {
        "onlyTarget": {
          "description": "En UI solo Target (no By)",
          "forbiddenTokens": [" org.openqa.selenium.By ", " By."],
          "requiredExtends": "net.serenitybdd.core.pages.PageObject"
        }
      },
      "tasks": {
        "instrumentedFactories": {
          "description": "Tasks deben exponer factory con Tasks.instrumented(...) y constructor público",
          "mustContain": ["Tasks.instrumented("],
          "forbidPrivateConstructor": true
        }
      },
      "stepDefinitions": {
        "rules": [
          "StepDefinitions deben residir bajo com.sistecredito.web.stepdefinitions",
          "Usar anotaciones en inglés (io.cucumber.java.en.*)",
          "Máximo 3-5 líneas por método"
        ]
      },
      "runner": {
        "rules": [
          "Runner usa CucumberWithSerenity",
          "Glue apunta a com.sistecredito.web.stepdefinitions y com.sistecredito.web.conf",
          "Tags configurables (por defecto @smokTest)"
        ]
      }
    },
    "huValidationChecklist": {
      "description": "Checklist para validar implementación completa de HU",
      "uiLayer": [
        "✅ UI class extiende PageObject",
        "✅ Solo Target locators (no By)",
        "✅ Prefijos correctos (TXT_, BTN_, LBL_)",
        "✅ @DefaultUrl si es página inicial"
      ],
      "taskLayer": [
        "✅ Implementa Task interface",
        "✅ Constructor público",
        "✅ Factory method con Tasks.instrumented()",
        "✅ Lenguaje de negocio en nombre",
        "✅ @Step annotation recomendada",
        "✅ Incluye waits apropiados"
      ],
      "questionLayer": [
        "✅ Implementa Question<T>",
        "✅ Retorna valor (no hace aserciones)",
        "✅ Factory method estático",
        "✅ Incluye waits si necesario"
      ],
      "stepDefinitionLayer": [
        "✅ Paquete correcto (com.sistecredito.web.stepdefinitions)",
        "✅ Máximo 3-5 líneas por método",
        "✅ Solo orquestación (no lógica)",
        "✅ Usar theActorCalled() y theActorInTheSpotlight()"
      ],
      "configurationLayer": [
        "✅ SetTheStage.java con @Before/@After",
        "✅ OnStage.setTheStage(new OnlineCast())",
        "✅ Runner con CucumberWithSerenity",
        "✅ Glue correcto en configuración",
        "✅ serenity.properties configurado"
      ]
    }
  },

  "troubleshooting": {
    "description": "Guía rápida para errores comunes en automatización WEB",
    "errors": [
      {
        "id": 1,
        "error": "WebDriver not found / SessionNotCreatedException",
        "type": "Runtime",
        "cause": "No se configuró webdriver en serenity.properties o driver no instalado",
        "solution": "Agregar webdriver.driver=chrome en serenity.properties y verificar instalación de ChromeDriver",
        "prevention": "Siempre incluir webdriver.driver en serenity.properties"
      },
      {
        "id": 2,
        "error": "Element not found / NoSuchElementException",
        "type": "Runtime",
        "cause": "Locator incorrecto, elemento no visible, o página no cargada",
        "solution": "Verificar el locator, agregar WaitUntil explícito en Task/Question",
        "prevention": "Usar locators estables (id > css > xpath) y siempre incluir waits"
      },
      {
        "id": 3,
        "error": "NullPointerException en BrowseTheWeb",
        "type": "Runtime",
        "cause": "Actor sin inicialización de escenario o sin BrowseTheWeb ability",
        "solution": "Usar SetTheStage con @Before para OnStage.setTheStage(new OnlineCast())",
        "prevention": "Centralizar setup de actores en conf/SetTheStage"
      },
      {
        "id": 4,
        "error": "NoSuchMethodException en Task",
        "type": "Runtime",
        "cause": "Constructor privado o falta de Tasks.instrumented(...) en factory",
        "solution": "Constructor público + usar Tasks.instrumented(...) en factory methods",
        "prevention": "Siempre usar Tasks.instrumented() para Tasks"
      },
      {
        "id": 5,
        "error": "StaleElementReferenceException",
        "type": "Runtime",
        "cause": "Elemento cambió en DOM después de localizarlo",
        "solution": "Reubicar elemento dentro de performAs() o usar waits más específicos",
        "prevention": "Evitar almacenar referencias a elementos entre acciones"
      },
      {
        "id": 6,
        "error": "Timeout en WaitUntil",
        "type": "Runtime",
        "cause": "Elemento tarda más de lo esperado en aparecer",
        "solution": "Aumentar timeout o verificar condición de espera",
        "prevention": "Usar timeouts razonables (120 segundos máximo)"
      }
    ],
    "bestPractices": [
      "Siempre usar Target en lugar de By directamente",
      "Incluir WaitUntil en todas las interacciones",
      "Centralizar setup de actores",
      "Usar locators estables y únicos",
      "Validar páginas con Questions, no con aserciones directas",
      "Mantener StepDefinitions con máximo 3-5 líneas"
    ]
  },

  "completeExample": {
    "description": "Ejemplo completo de automatización WEB con Serenity Screenplay",
    "feature": "Feature: Búsqueda de productos en Amazon\n\n  @smokTest\n  Scenario: Buscar producto exitosamente\n    Given que \"Daniel\" se encuentra en la pagina web\n    When busca el producto \"laptop\"\n    Then se visualizan resultados",
    "uiAmazon": "package com.screenplay.web.userInterfaces;\n\nimport net.serenitybdd.annotations.DefaultUrl;\nimport net.serenitybdd.core.pages.PageObject;\nimport net.serenitybdd.screenplay.targets.Target;\n\n@DefaultUrl(\"https://www.amazon.com/-/es/ref=nav_logo\")\npublic class UIAmazon extends PageObject {\n\n    public static final Target TXT_BUSQUEDA = Target.the(\"Input busqueda\").locatedBy(\"//input[@id='twotabsearchtextbox']\");\n    public static final Target BTN_BUSCAR   = Target.the(\"Botón buscar\").locatedBy(\"//input[@id='nav-search-submit-button']\");\n    public static final Target LBL_RESULTADOS = Target.the(\"Label resultados\").locatedBy(\"//h2[normalize-space()='Resultados']\");\n    public static final Target RESULTADO = Target.the(\"Sección resultado\").locatedBy(\"(//div[@class='puisg-row'])[1]\");\n}",
    "taskNavigation": "package com.screenplay.web.tasks;\n\nimport com.screenplay.web.userInterfaces.UIAmazon;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.Tasks;\nimport net.serenitybdd.screenplay.actions.Open;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\nimport static com.screenplay.web.userInterfaces.UIAmazon.TXT_BUSQUEDA;\nimport static net.serenitybdd.screenplay.matchers.WebElementStateMatchers.isClickable;\n\npublic class AbrirPaginaWeb implements Task {\n\n    private UIAmazon uiAmazon;\n\n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.wasAbleTo(\n            Open.browserOn(uiAmazon),\n            WaitUntil.the(TXT_BUSQUEDA, isClickable()).forNoMoreThan(120).seconds()\n        );\n    }\n\n    public static AbrirPaginaWeb enAmazon() {\n        return Tasks.instrumented(AbrirPaginaWeb.class);\n    }\n}",
    "taskBusiness": "package com.screenplay.web.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.Tasks;\nimport net.serenitybdd.screenplay.actions.Click;\nimport net.serenitybdd.screenplay.actions.Enter;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\nimport static com.screenplay.web.userInterfaces.UIAmazon.*;\nimport static net.serenitybdd.screenplay.matchers.WebElementStateMatchers.isClickable;\n\npublic class BuscarProducto implements Task {\n\n    private final String nombreProducto;\n\n    public BuscarProducto(String nombreProducto) {\n        this.nombreProducto = nombreProducto;\n    }\n\n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Enter.theValue(nombreProducto).into(TXT_BUSQUEDA),\n            Click.on(BTN_BUSCAR),\n            WaitUntil.the(LBL_RESULTADOS, isClickable()).forNoMoreThan(120).seconds()\n        );\n    }\n\n    public static BuscarProducto llamado(String nombreProducto) {\n        return Tasks.instrumented(BuscarProducto.class, nombreProducto);\n    }\n}",
    "question": "package com.screenplay.web.questions;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.matchers.WebElementStateMatchers;\nimport net.serenitybdd.screenplay.targets.Target;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\n\npublic class VerificarElemento implements Question<Boolean> {\n\n    private final Target target;\n\n    public VerificarElemento(Target target) { this.target = target; }\n\n    @Override\n    public Boolean answeredBy(Actor actor) {\n        actor.attemptsTo( WaitUntil.the(target, WebElementStateMatchers.isVisible()).forNoMoreThan(120).seconds() );\n        return target.resolveFor(actor).isVisible();\n    }\n\n    public static VerificarElemento as(Target target) {\n        return new VerificarElemento(target);\n    }\n}",
    "stepDefinitions": "package com.sistecredito.web.stepdefinitions;\n\nimport static net.serenitybdd.screenplay.actors.OnStage.*;\nimport static net.serenitybdd.screenplay.GivenWhenThen.seeThat;\nimport static org.hamcrest.Matchers.is;\nimport io.cucumber.java.en.Given;\nimport io.cucumber.java.en.When;\nimport io.cucumber.java.en.Then;\nimport com.screenplay.web.tasks.AbrirPaginaWeb;\nimport com.screenplay.web.tasks.BuscarProducto;\nimport com.screenplay.web.questions.VerificarElemento;\nimport com.screenplay.web.userInterfaces.UIAmazon;\n\npublic class AmazonBusquedaStepdefinitions {\n\n    @Given(\"que {string} se encuentra en la pagina web\")\n    public void abrirHome(String actor) {\n        theActorCalled(actor).wasAbleTo( AbrirPaginaWeb.enAmazon() );\n    }\n\n    @When(\"busca el producto {string}\")\n    public void buscarProducto(String producto) {\n        theActorInTheSpotlight().attemptsTo( BuscarProducto.llamado(producto) );\n    }\n\n    @Then(\"se visualizan resultados\")\n    public void validarResultados() {\n        theActorInTheSpotlight().should( seeThat( VerificarElemento.as(UIAmazon.LBL_RESULTADOS), is(true) ) );\n    }\n}",
    "setTheStage": "package com.sistecredito.web.conf;\n\nimport io.cucumber.java.Before;\nimport io.cucumber.java.After;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.actors.OnlineCast;\n\npublic class SetTheStage {\n\n    @Before\n    public void setStage() {\n        OnStage.setTheStage(new OnlineCast());\n    }\n\n    @After\n    public void tearDown() {\n        OnStage.drawTheCurtain();\n    }\n}",
    "runner": "package com.sistecredito.web.runners;\n\nimport io.cucumber.junit.CucumberOptions;\nimport net.serenitybdd.cucumber.CucumberWithSerenity;\nimport org.junit.runner.RunWith;\n\n@RunWith(CucumberWithSerenity.class)\n@CucumberOptions(\n    snippets = CucumberOptions.SnippetType.CAMELCASE,\n    features = \"src/test/resources/features/\",\n    tags = \"@smokTest\",\n    glue = {\"com.sistecredito.web.stepdefinitions\",\"com.sistecredito.web.conf\"},\n    plugin = {\"pretty\", \"json:target/cucumber-reports/cucumber.json\"},\n    publish = true\n)\npublic class Runner {}",
    "serenityProperties": "serenity.project.name=Amazon Search Demo\nwebdriver.driver=chrome\nserenity.take.screenshots=AFTER_EACH_STEP\nchrome.switches=--start-maximized;--incognito"
  },

  "serenityWebConfiguration": {
    "description": "Configuración obligatoria de Serenity para pruebas WEB",
    "file": "serenity.properties (raíz del proyecto, fuera de src/)",
    "required": true,
    "mandatoryProperties": {
      "webdriver.driver": {
        "description": "Driver a usar (chrome, firefox, edge, etc.)",
        "values": [
          "chrome",
          "firefox",
          "edge",
          "safari"
        ],
        "default": "chrome",
        "example": "webdriver.driver=chrome"
      },
      "serenity.take.screenshots": {
        "description": "Cuándo tomar screenshots",
        "values": [
          "FOR_EACH_ACTION",
          "BEFORE_AND_AFTER_EACH_STEP",
          "AFTER_EACH_STEP",
          "FOR_FAILURES"
        ],
        "default": "BEFORE_AND_AFTER_EACH_STEP",
        "example": "serenity.take.screenshots=BEFORE_AND_AFTER_EACH_STEP"
      },
      "chrome.switches": {
        "description": "Opciones de Chrome (opcional)",
        "example": "chrome.switches=--start-maximized;--incognito"
      },
      "serenity.project.name": {
        "description": "Nombre del proyecto en reportes",
        "example": "serenity.project.name=Amazon Search Automation"
      }
    },
    "templateComplete": "# Serenity Web Configuration\nserenity.project.name=Robot Web Automation\nchrome.switches=--start-maximized;--ignore-certificate-errors;--use-fake-ui-for-media-stream;--use-fake-device-for-media-stream;--incognito;--illegal-access=warn\nautomatic.driver.download=true\nserenity.use.unique.browser=false\nserenity.dry.run=false\nserenity.verbose.steps=FALSE\nserenity.report.encoding=UTF8\nfeature.file.encoding=UTF8\nserenity.test.root=net.thucydides.showcase.cucumber.junit\nserenity.requirement.types=feature\nserenity.take.screenshots=AFTER_EACH_STEP\nserenity.outputDirectory=target\nserenity.restart.browser.for.each=never\nserenity.compress.filenames=false\nserenity.console.colors=true\nenable.markdown=story,narrative,scenario,step\nwebdriver.driver=chrome\nwebdriver.timeouts.implicitlywait=10000\nchrome.capabilities.acceptSslCerts=true\nchrome.capabilities.handlesAlerts=true\nchrome_preferences.profile_default_content_settings.popups=0\nchrome_preferences.pdfjs.disabled=true",
    "gradleDependencies": {
      "description": "Dependencias completas para Gradle (build.gradle)",
      "template": "dependencies {\n    // Serenity BDD Core\n    implementation 'net.serenity-bdd:serenity-core:5.0.5'\n    implementation 'net.serenity-bdd:serenity-screenplay:5.0.5'\n    implementation 'net.serenity-bdd:serenity-screenplay-webdriver:5.0.5'\n    implementation 'net.serenity-bdd:serenity-ensure:5.0.5'\n\n    // Selenium WebDriver\n    implementation 'org.seleniumhq.selenium:selenium-java:4.39.0'\n\n    // Cucumber con Serenity\n    testImplementation 'net.serenity-bdd:serenity-cucumber:5.0.5'\n    testImplementation 'io.cucumber:cucumber-java:7.20.1'\n    testImplementation 'io.cucumber:cucumber-junit:7.20.1'\n\n    // JUnit 4 para el runner\n    testImplementation 'junit:junit:4.13.2'\n\n    // Logging\n    implementation 'org.slf4j:slf4j-simple:2.0.16'\n}",
      "versions": {
        "serenity": "5.0.5",
        "selenium": "4.39.0",
        "cucumber": "7.20.1",
        "junit": "4.13.2",
        "slf4j": "2.0.16"
      }
    },
    "mavenDependencies": {
      "description": "Dependencias completas para Maven (pom.xml)",
      "template": "<dependencies>\n    <!-- Serenity BDD Core -->\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-core</artifactId>\n        <version>5.0.5</version>\n    </dependency>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay</artifactId>\n        <version>5.0.5</version>\n    </dependency>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay-webdriver</artifactId>\n        <version>5.0.5</version>\n    </dependency>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-ensure</artifactId>\n        <version>5.0.5</version>\n    </dependency>\n\n    <!-- Selenium WebDriver -->\n    <dependency>\n        <groupId>org.seleniumhq.selenium</groupId>\n        <artifactId>selenium-java</artifactId>\n        <version>4.39.0</version>\n    </dependency>\n\n    <!-- Cucumber con Serenity -->\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-cucumber</artifactId>\n        <version>5.0.5</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>io.cucumber</groupId>\n        <artifactId>cucumber-java</artifactId>\n        <version>7.20.1</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>io.cucumber</groupId>\n        <artifactId>cucumber-junit</artifactId>\n        <version>7.20.1</version>\n        <scope>test</scope>\n    </dependency>\n\n    <!-- JUnit 4 -->\n    <dependency>\n        <groupId>junit</groupId>\n        <artifactId>junit</artifactId>\n        <version>4.13.2</version>\n        <scope>test</scope>\n    </dependency>\n\n    <!-- Logging -->\n    <dependency>\n        <groupId>org.slf4j</groupId>\n        <artifactId>slf4j-simple</artifactId>\n        <version>2.0.16</version>\n    </dependency>\n</dependencies>"
    }
  },
  "actorManagementWeb": {
    "description": "Patrón obligatorio para gestión de actores en Serenity Screenplay WEB",
    "actorAbilities": {
      "description": "Habilidades que debe tener un Actor para interactuar con el navegador",
      "required": "BrowseTheWeb",
      "import": "import net.serenitybdd.screenplay.abilities.BrowseTheWeb;",
      "reason": "Sin BrowseTheWeb el actor no puede interactuar con WebDriver",
      "errorWithout": "java.lang.NullPointerException: Cannot invoke WebDriver methods",
      "configuration": {
        "method1": {
          "name": "En el @Before hook con OnStage (RECOMENDADO)",
          "code": "@Before\npublic void setTheStage() {\n    OnStage.setTheStage(new OnlineCast());\n    OnStage.theActorCalled(\"Usuario\")\n        .can(BrowseTheWeb.with(driver));\n}",
          "pros": "Actor configurado una sola vez, limpio en los steps",
          "note": "Requiere inyección de WebDriver"
        },
        "method2": {
          "name": "Dejar que Serenity maneje el WebDriver automáticamente (RECOMENDADO)",
          "code": "@Before\npublic void setTheStage() {\n    OnStage.setTheStage(new OnlineCast());\n}\n\n@After\npublic void tearDown() {\n    OnStage.drawTheCurtain();\n}",
          "pros": "Serenity gestiona el ciclo de vida del WebDriver automáticamente y lo cierra correctamente",
          "recommended": true,
          "note": "OnStage.drawTheCurtain() cierra el WebDriver y libera recursos automáticamente"
        }
      }
    },
    "centralizedSetup": {
      "description": "Configuración centralizada en conf/SetTheStage.java (MEJOR PRÁCTICA)",
      "file": "com.{company}.web.conf.SetTheStage",
      "mandatory": true,
      "template": "package com.{company}.web.conf;\n\nimport io.cucumber.java.Before;\nimport io.cucumber.java.After;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.actors.OnlineCast;\n\npublic class SetTheStage {\n    \n    @Before\n    public void setTheStage() {\n        OnStage.setTheStage(new OnlineCast());\n    }\n    \n    @After\n    public void tearDown() {\n        OnStage.drawTheCurtain();\n    }\n}",
      "benefits": [
        "Inicialización centralizada en un solo archivo",
        "Cierre automático del WebDriver después de cada escenario",
        "NO necesitas @Before/@After en cada StepDefinition",
        "drawTheCurtain() libera todos los recursos y cierra navegadores"
      ]
    },
    "mandatory": true,
    "template": "public class BusquedaStepDefinitions {\n    \n    // NOTA: NO necesitas @Before ni @After aquí\n    // Están centralizados en SetTheStage.java\n    \n    @Dado(\"que {string} ingresó a la página de Amazon\")\n    public void queIngresoALaPagina(String nombreActor) {\n        theActorCalled(nombreActor)\n            .attemptsTo(NavegarA.laUrl(Constants.BASE_URL));\n    }\n    \n    @Cuando(\"ingresa un producto en la barra de búsqueda y ejecuta la acción\")\n    public void ingresaProductoYBusca() {\n        theActorInTheSpotlight()\n            .attemptsTo(\n                EscribirEn.el(HomePageUI.BARRA_BUSQUEDA).elTexto(\"laptop\"),\n                HacerClicEn.el(HomePageUI.BOTON_BUSCAR)\n            );\n    }\n    \n    @Entonces(\"los resultados relevantes del producto deben mostrarse correctamente\")\n    public void losResultadosSeVen() {\n        theActorInTheSpotlight()\n            .should(seeThat(ElementoEsVisible.en(SearchPageUI.RESULTADOS), is(true)));\n    }\n}"
  },
  "byteBuddyRequirements": {
    "description": "Serenity usa ByteBuddy para crear proxies dinámicos - Requisitos obligatorios",
    "criticalRules": [
      {
        "rule": "Tasks DEBEN tener constructor público",
        "severity": "CRÍTICO",
        "forbidden": "private constructor",
        "required": "public constructor"
      },
      {
        "rule": "Interactions DEBEN tener constructor público",
        "severity": "CRÍTICO",
        "forbidden": "private constructor",
        "required": "public constructor"
      },
      {
        "rule": "Questions NO requieren instrumented()",
        "severity": "INFO",
        "recommended": "usar 'new Question()' directamente"
      },
      {
        "rule": "NUNCA usar 'new' para Tasks/Interactions",
        "severity": "CRÍTICO",
        "required": "usar instrumented(Task.class) o instrumented(Interaction.class)"
      }
    ]
  },
  "mandatoryValidations": {
    "description": "Cada escenario WEB debe validar mínimo:",
    "required": [
      {
        "validation": "Visibilidad de elemento clave",
        "example": "actor.should(seeThat(ElementoEsVisible.en(PageUI.ELEMENTO), is(true)))",
        "serinterfaces": "package com.sistecredito.web.userinterfaces;\n\nimport org.openqa.selenium.By;\n\npublic class HomePageUI {\n    public static final By BARRA_BUSQUEDA = By.id(\"twotabsearchtextbox\");\n    public static final By BOTON_BUSCAR = By.id(\"nav-search-submit-button\");\n    \n    private HomePageUI() {}\n}\n\npackage com.sistecredito.web.userinterfaces;\n\nimport org.openqa.selenium.By;\n\npublic class SearchResultsPageUI {\n    public static final By RESULTADOS = By.cssSelector(\".s-main-slot .s-result-item\");\n    public static final By TITULOS = By.cssSelector(\".a-size-medium\");\n    \n    private SearchResultsPageUI() {}\n}",
        "conf": "package com.sistecredito.web.conf;\n\nimport io.cucumber.java.Before;\nimport io.cucumber.java.After;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.actors.OnlineCast;\n\npublic class SetTheStage {\n    \n    @Before\n    public void setTheStage() {\n        OnStage.setTheStage(new OnlineCast());\n    }\n    \n    @After\n    public void tearDown() {\n        OnStage.drawTheCurtain();\n    }\n}"
      },
      {
        "validation": "Texto de un elemento",
        "example": "actor.should(seeThat(TextoDelElemento.en(PageUI.TITULO), equalTo(\"Expected\")))"
      },
      {
        "validation": "Cantidad de elementos mayor a 0",
        "example": "actor.should(seeThat(CantidadDeElementos.en(PageUI.RESULTADOS), greaterThan(0)))",
        "stepDefinition": "package com.sistecredito.web.stepdefinitions;\n\nimport static net.serenitybdd.screenplay.actors.OnStage.*;\nimport static org.hamcrest.Matchers.*;\n\nimport io.cucumber.java.es.*;\nimport com.sistecredito.web.tasks.*;\nimport com.sistecredito.web.questions.*;\nimport com.sistecredito.web.userinterfaces.*;\n\npublic class BusquedaStepDefinitions {\n    \n    // NOTA: @Before está en SetTheStage.java (conf/)\n}\n"
      }
    ],
    "completeExample": {
      "feature": "# language: es\nCaracterística: Búsqueda de productos en Amazon\n  Como usuario de Amazon\n  Quiero buscar productos\n  Para encontrar lo que necesito\n\n  Escenario: Búsqueda exitosa de producto\n    Dado que \"Daniel\" ingresó a la página de Amazon\n    Cuando ingresa \"laptop\" en la barra de búsqueda y ejecuta la acción\n    Entonces los resultados relevantes del producto deben mostrarse correctamente\n    Y debe haber al menos 1 resultado visible",
      "ui": "package com.sistecredito.web.userinterfaces;\n\nimport net.serenitybdd.annotations.DefaultUrl;\nimport net.serenitybdd.core.pages.PageObject;\nimport net.serenitybdd.screenplay.targets.Target;\n\n@DefaultUrl(\"https://www.amazon.com/-/es/ref=nav_logo\")\npublic class UIAmazon extends PageObject {\n\n    public static final Target TXT_BUSQUEDA = Target.the(\"Input busqueda\").locatedBy(\"//input[@id='twotabsearchtextbox']\");\n    public static final Target BTN_BUSCAR = Target.the(\"Botón buscar\").locatedBy(\"//input[@id='nav-search-submit-button']\");\n    public static final Target LBL_RESULTADOS = Target.the(\"Label resultados\").locatedBy(\"//h2[normalize-space()='Resultados']\");\n}\n\npackage com.sistecredito.web.userinterfaces;\n\nimport net.serenitybdd.core.pages.PageObject;\nimport net.serenitybdd.screenplay.targets.Target;\n\npublic class UISearchResults extends PageObject {\n\n    public static final Target RESULTADO = Target.the(\"Sección resultado\").locatedBy(\"(//div[@class='puisg-row'])[1]\");\n    public static final Target LBL_TITULOS = Target.the(\"Títulos productos\").locatedBy(\"//span[@class='a-size-medium']\");\n}",
      "interaction": "package com.sistecredito.web.interactions;\n\nimport net.serenitybdd.core.steps.Instrumented;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Interaction;\nimport net.serenitybdd.screenplay.actions.Enter;\nimport net.serenitybdd.screenplay.actions.Click;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\nimport net.serenitybdd.screenplay.matchers.WebElementStateMatchers;\nimport com.sistecredito.web.models.DatosFormulario;\nimport static com.sistecredito.web.userinterfaces.UIFormulario.*;\n\npublic class FormularioModal implements Interaction {\n    \n    private DatosFormulario datos;\n    \n    public FormularioModal(DatosFormulario datos) {\n        this.datos = datos;\n    }\n    \n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            WaitUntil.the(TXT_NOMBRE, WebElementStateMatchers.isVisible()).forNoMoreThan(120).seconds(),\n            Enter.theValue(datos.getNombre()).into(TXT_NOMBRE),\n            Enter.theValue(datos.getApellido()).into(TXT_APELLIDO),\n            Click.on(BTN_CONFIRMAR)\n        );\n    }\n    \n    public static FormularioModal con(DatosFormulario datos) {\n        return Instrumented.instanceOf(FormularioModal.class).withProperties(datos);\n    }\n}",
      "task": "package com.sistecredito.web.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.Tasks;\nimport net.serenitybdd.screenplay.actions.Click;\nimport net.serenitybdd.screenplay.actions.Enter;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\nimport static com.sistecredito.web.userinterfaces.UIAmazon.*;\nimport static net.serenitybdd.screenplay.matchers.WebElementStateMatchers.isClickable;\n\npublic class BuscarProducto implements Task {\n    \n    private String nombreProducto;\n    \n    public BuscarProducto(String nombreProducto) {\n        this.nombreProducto = nombreProducto;\n    }\n    \n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Enter.theValue(nombreProducto).into(TXT_BUSQUEDA),\n            Click.on(BTN_BUSCAR),\n            WaitUntil.the(LBL_RESULTADOS, isClickable()).forNoMoreThan(120).seconds()\n        );\n    }\n    \n    public static BuscarProducto llamado(String nombreProducto) {\n        return Tasks.instrumented(BuscarProducto.class, nombreProducto);\n    }\n}",
      "taskNavegacion": "package com.sistecredito.web.tasks;\n\nimport com.sistecredito.web.userinterfaces.UIAmazon;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.actions.Open;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\nimport static com.sistecredito.web.userinterfaces.UIAmazon.TXT_BUSQUEDA;\nimport static net.serenitybdd.screenplay.matchers.WebElementStateMatchers.isClickable;\n\npublic class AbrirPaginaWeb implements Task {\n    \n    private UIAmazon uiAmazon;\n    \n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.wasAbleTo(\n            Open.browserOn(uiAmazon),\n            WaitUntil.the(TXT_BUSQUEDA, isClickable()).forNoMoreThan(120).seconds()\n        );\n    }\n    \n    public static AbrirPaginaWeb enAmazon() {\n        return new AbrirPaginaWeb();\n    }\n}",
      "question": "package com.sistecredito.web.questions;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.targets.Target;\nimport net.thucydides.core.annotations.Step;\n\npublic class ElementoEsVisible implements Question<Boolean> {\n    private final Target target;\n    \n    public ElementoEsVisible(Target target) {\n        this.target = target;\n    }\n    \n    @Step(\"{0} verifica que el elemento es visible\")\n    @Override\n    public Boolean answeredBy(Actor actor) {\n        return target.resolveFor(actor).isVisible();\n    }\n    \n    public static ElementoEsVisible en(Target target) {\n        return new ElementoEsVisible(target);\n    }\n}",
      "stepDefinition": "package com.sistecredito.web.stepdefinitions;\n\nimport static net.serenitybdd.screenplay.actors.OnStage.*;\nimport static org.hamcrest.Matchers.*;\nimport io.cucumber.java.es.*;\nimport com.sistecredito.web.tasks.*;\nimport com.sistecredito.web.questions.*;\nimport com.sistecredito.web.userinterfaces.*;\n\npublic class BusquedaStepDefinitions {\n    \n    // NOTA: @Before y @After están centralizados en SetTheStage.java (conf/)\n    // NO los dupliques aquí\n    \n    @Dado(\"que {string} ingresó a la página de Amazon\")\n    public void queIngresoALaPagina(String nombreActor) {\n        theActorCalled(nombreActor)\n            .attemptsTo(AbrirPaginaWeb.enAmazon());\n    }\n    \n    @Cuando(\"ingresa {string} en la barra de búsqueda y ejecuta la acción\")\n    public void ingresaProductoYBusca(String producto) {\n        theActorInTheSpotlight()\n            .attemptsTo(BuscarProducto.llamado(producto));\n    }\n    \n    @Entonces(\"los resultados relevantes del producto deben mostrarse correctamente\")\n    public void losResultadosSeVen() {\n        theActorInTheSpotlight()\n            .should(seeThat(ElementoEsVisible.en(UISearchResults.LBL_RESULTADOS), is(true)));\n    }\n    \n    @Y(\"debe haber al menos {int} resultado visible\")\n    public void debeHaberResultados(int cantidad) {\n        theActorInTheSpotlight()\n            .should(seeThat(CantidadDeElementos.en(UISearchResults.RESULTADO), greaterThan(cantidad - 1)));\n    }\n}"
    },
    "forbidden": [
      "Usar Page Object Model tradicional con @FindBy",
      "Usar By locators en lugar de Target",
      "NO extender PageObject en UI classes",
      "Lógica en step definitions",
      "WebDriver directo en Tasks",
      "Aserciones en Interactions",
      "URLs hardcodeadas en Tasks (usar constantes)",
      "Lógica en UI classes",
      "Métodos de acción en Pages"
    ],
    "requiredArtifacts": [
      "Feature (.feature)",
      "StepDefinitions (Java)",
      "Task (Java - implements Task)",
      "Interaction (Java - implements Interaction)",
      "Question (Java - implements Question<T>)",
      "UI (Java extends PageObject con Target locators)",
      "serenity.properties (configuración WebDriver)",
      "conf/SetTheStage.java (@Before/@After hooks)"
    ]
  },
  "serenityBdd4Migration": {
    "description": "Cambios críticos en Serenity BDD 4.x para WEB",
    "deprecatedClasses": [
      {
        "old": "net.serenitybdd.cucumber.CucumberSerenityRunner",
        "new": "net.serenitybdd.cucumber.CucumberWithSerenity",
        "severity": "CRÍTICO"
      }
    ],
    "runnerTemplate": "@RunWith(CucumberWithSerenity.class)\n@CucumberOptions(\n    features = \"src/test/resources/features\",\n    glue = \"com.{company}.stepdefinitions\",\n    tags = \"not @ignore\",\n    snippets = CucumberOptions.SnippetType.CAMELCASE\n)\npublic class AcceptanceTestRunner {}"
  },
  "troubleshooting": {
    "description": "Guía rápida para resolver errores comunes WEB",
    "errors": [
      {
        "id": 1,
        "error": "WebDriver not found",
        "type": "Runtime",
        "cause": "No se configuró webdriver en serenity.properties",
        "solution": "Agregar webdriver.driver=chrome en serenity.properties"
      },
      {
        "id": 2,
        "error": "Element not found",
        "type": "Runtime",
        "cause": "Locator incorrecto o elemento no visible",
        "solution": "Verificar el locator, agregar espera explícita"
      },
      {
        "id": 3,
        "error": "NullPointerException en BrowseTheWeb",
        "type": "Runtime",
        "cause": "Actor sin habilidad BrowseTheWeb",
        "solution": "Dejar que Serenity gestione el WebDriver automáticamente"
      },
      {
        "id": 4,
        "error": "NoSuchMethodException en Task",
        "type": "Runtime",
        "cause": "Constructor privado o usar 'new' en vez de instrumented()",
        "solution": "Constructor público + usar Tasks.instrumented()"
      }
    ]
  },
  "requiredArtifacts": [
    "Feature (.feature)",
    "StepDefinitions (Java)",
    "Task (Java - implements Task)",
    "Interaction (Java - implements Interaction)",
    "Question (Java - implements Question<T>)",
    "Model (Java POJO)",
    "Builder (Java con métodos estáticos)",
    "Endpoints (Java con constantes)"
  ],
  "stepAnnotations": {
    "description": "Anotación @Step recomendada para mejor reporting",
    "optional": true,
    "recommended": true,
    "benefits": [
      "Mejora reportes HTML de Serenity",
      "Permite usar placeholders como {0} para el actor",
      "Hace el reporte más legible",
      "Facilita debugging"
    ],
    "usage": {
      "import": "import net.serenitybdd.annotations.Step;",
      "taskExample": "@Step(\"{0} crea un usuario con datos válidos\")\n@Override\npublic <T extends Actor> void performAs(T actor) {\n    actor.attemptsTo(\n        PostRequest.to(UserEndpoints.CREATE_USER, request)\n    );\n}",
      "interactionExample": "@Step(\"{0} envía petición POST a {1}\")\n@Override\npublic <T extends Actor> void performAs(T actor) {\n    actor.attemptsTo(\n        Post.to(endpoint).with(request -> request.contentType(ContentType.JSON).body(body))\n    );\n}",
      "questionExample": "@Step(\"{0} obtiene el status code de la respuesta\")\n@Override\npublic Integer answeredBy(Actor actor) {\n    return SerenityRest.lastResponse().statusCode();\n}"
    },
    "placeholders": [
      "{0} - Nombre del actor",
      "{1} - Primer parámetro del método",
      "{2} - Segundo parámetro del método"
    ]
  },

  "huImplementationPatterns": {
    "description": "Patrones específicos para implementar Historias de Usuario completas",
    "basicSearchHU": {
      "description": "HU de búsqueda básica (ej: Amazon, MercadoLibre)",
      "requiredFiles": {
        "ui": ["UIHomePage.java", "UISearchResults.java"],
        "tasks": ["NavigateToHomePage.java", "SearchForProduct.java"],
        "questions": ["SearchResultsAreVisible.java", "NumberOfResults.java"],
        "stepDefinitions": ["SearchStepDefinitions.java"],
        "feature": ["search.feature"],
        "conf": ["SetTheStage.java"],
        "runner": ["SearchRunner.java"]
      },
      "implementationOrder": [
        "1. Crear UI classes con Target locators",
        "2. Implementar Questions para validaciones",
        "3. Crear Tasks para acciones de negocio",
        "4. Escribir StepDefinitions (máx 3 líneas)",
        "5. Crear archivo .feature con escenarios",
        "6. Configurar SetTheStage y Runner"
      ],
      "codeTemplates": {
        "uiHome": "package com.screenplay.web.userinterfaces;\n\nimport net.serenitybdd.annotations.DefaultUrl;\nimport net.serenitybdd.core.pages.PageObject;\nimport net.serenitybdd.screenplay.targets.Target;\n\n@DefaultUrl(\"https://www.amazon.com\")\npublic class UIHomePage extends PageObject {\n    public static final Target TXT_SEARCH = Target.the(\"Search box\").locatedBy(\"#twotabsearchtextbox\");\n    public static final Target BTN_SEARCH = Target.the(\"Search button\").locatedBy(\"#nav-search-submit-button\");\n}",
        "taskNavigate": "package com.screenplay.web.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.Tasks;\nimport net.serenitybdd.screenplay.actions.Open;\nimport net.serenitybdd.screenplay.waits.WaitUntil;\nimport net.serenitybdd.screenplay.matchers.WebElementStateMatchers;\nimport com.screenplay.web.userinterfaces.UIHomePage;\nimport static com.screenplay.web.userinterfaces.UIHomePage.TXT_SEARCH;\n\npublic class NavigateToHomePage implements Task {\n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.wasAbleTo(\n            Open.browserOn(new UIHomePage()),\n            WaitUntil.the(TXT_SEARCH, WebElementStateMatchers.isVisible())\n        );\n    }\n    public static NavigateToHomePage now() {\n        return Tasks.instrumented(NavigateToHomePage.class);\n    }\n}",
        "stepDefinitions": "package com.sistecredito.web.stepdefinitions;\n\nimport io.cucumber.java.en.Given;\nimport io.cucumber.java.en.When;\nimport io.cucumber.java.en.Then;\nimport static net.serenitybdd.screenplay.actors.OnStage.*;\nimport static org.hamcrest.Matchers.*;\nimport com.screenplay.web.tasks.*;\nimport com.screenplay.web.questions.*;\n\npublic class SearchStepDefinitions {\n    @Given(\"the user is on the home page\")\n    public void userIsOnHomePage() {\n        theActorCalled(\"user\").wasAbleTo(NavigateToHomePage.now());\n    }\n    @When(\"searches for {string}\")\n    public void searchesForProduct(String product) {\n        theActorInTheSpotlight().attemptsTo(SearchForProduct.withKeyword(product));\n    }\n    @Then(\"should see search results\")\n    public void shouldSeeResults() {\n        theActorInTheSpotlight().should(seeThat(SearchResultsAreVisible.value(), is(true)));\n    }\n}"
      }
    },
    "formSubmissionHU": {
      "description": "HU de envío de formularios (registro, contacto, etc.)",
      "requiredFiles": {
        "ui": ["UIFormPage.java"],
        "tasks": ["FillForm.java", "SubmitForm.java"],
        "questions": ["FormSubmittedSuccessfully.java", "ErrorMessageIsVisible.java"],
        "models": ["FormData.java"],
        "builders": ["FormDataBuilder.java"]
      }
    },
    "navigationHU": {
      "description": "HU de navegación y menús",
      "requiredFiles": {
        "ui": ["UINavigation.java"],
        "tasks": ["NavigateToSection.java"],
        "questions": ["CurrentPageIs.java", "MenuIsExpanded.java"]
      }
    }
  },

  "automationPatterns": {
    "description": "Patrones comunes de automatización web con Serenity Screenplay",
    "loginPattern": {
      "description": "Automatización de login en aplicaciones web",
      "tasks": ["IniciarSesion", "CerrarSesion", "ValidarSesionActiva"],
      "questions": ["UsuarioLogueado", "MensajeErrorLogin"],
      "uiElements": ["TXT_USUARIO", "TXT_PASSWORD", "BTN_LOGIN", "LBL_ERROR"]
    },
    "searchPattern": {
      "description": "Búsqueda y filtrado de resultados",
      "tasks": ["BuscarProducto", "AplicarFiltros", "OrdenarResultados"],
      "questions": ["ResultadosVisibles", "CantidadResultados", "ResultadoEspecifico"],
      "uiElements": ["TXT_BUSQUEDA", "BTN_BUSCAR", "DDL_ORDENAR", "CHK_FILTRO"]
    },
    "formPattern": {
      "description": "Llenado y envío de formularios",
      "tasks": ["LlenarFormulario", "EnviarFormulario", "ValidarErrores"],
      "questions": ["FormularioEnviado", "ErroresVisibles", "CampoRequerido"],
      "uiElements": ["TXT_CAMPO", "DDL_OPCION", "CHK_ACEPTAR", "BTN_ENVIAR"]
    },
    "navigationPattern": {
      "description": "Navegación entre páginas y menús",
      "tasks": ["NavegarAPagina", "UsarMenu", "VolverAtras"],
      "questions": ["PaginaActual", "MenuExpandido", "BreadcrumbsCorrectos"],
      "uiElements": ["LNK_MENU", "LNK_SUBMENU", "BTN_ATRAS", "LBL_BREADCRUMB"]
    },
    "tablePattern": {
      "description": "Interacción con tablas y listas",
      "tasks": ["SeleccionarFila", "OrdenarColumna", "PaginarResultados"],
      "questions": ["FilaSeleccionada", "DatosTabla", "PaginacionCompleta"],
      "uiElements": ["TBL_DATOS", "HDR_COLUMNA", "BTN_SIGUIENTE", "LBL_PAGINA"]
    }
  },

  "bestPractices": {
    "selectors": [
      "Priorizar selectores estables: id > name > css > xpath",
      "Evitar xpath con índices absolutos (//div[1]/div[2])",
      "Usar data-testid o atributos personalizados cuando sea posible",
      "Validar unicidad de selectores antes de usarlos"
    ],
    "waits": [
      "Siempre incluir WaitUntil para elementos dinámicos",
      "Usar timeouts razonables (máximo 120 segundos)",
      "Preferir WebElementStateMatchers sobre Thread.sleep()",
      "Incluir waits en Questions para sincronización"
    ],
    "pageObjects": [
      "UI classes solo contienen Target locators",
      "Usar @DefaultUrl para navegación inicial",
      "No incluir lógica de negocio en UI classes",
      "Una UI class por página principal"
    ],
    "tasks": [
      "Un Task = una acción de negocio completa",
      "Usar lenguaje del negocio en nombres",
      "Incluir validaciones mínimas necesarias",
      "Factory methods con Tasks.instrumented()"
    ],
    "questions": [
      "Retornar tipos específicos, no genéricos",
      "Incluir waits cuando sea necesario",
      "Nombres descriptivos que expresen qué se valida",
      "Usar new() en lugar de instrumented()"
    ],
    "stepDefinitions": [
      "Máximo 3-5 líneas por método",
      "Solo orquestación, no lógica",
      "Usar theActorCalled() y theActorInTheSpotlight()",
      "Anotaciones en inglés, implementación en español"
    ]
  },

  "commonPitfalls": [
    {
      "problem": "Usar Page Object Model tradicional",
      "solution": "Adoptar Screenplay Pattern completamente",
      "why": "POM mezcla responsabilidades y dificulta testing"
    },
    {
      "problem": "Locators hardcoded en Tasks",
      "solution": "Centralizar locators en UI classes con Target",
      "why": "Dificulta mantenimiento cuando cambian los selectores"
    },
    {
      "problem": "Falta de waits explícitos",
      "solution": "Incluir WaitUntil.the() en todas las interacciones",
      "why": "Elementos dinámicos causan fallos intermitentes"
    },
    {
      "problem": "Aserciones directas en Tasks/Interactions",
      "solution": "Usar Questions para validaciones",
      "why": "Viola separación de responsabilidades"
    },
    {
      "problem": "No usar instrumented() en Tasks",
      "solution": "Siempre Tasks.instrumented() en factory methods",
      "why": "ByteBuddy no puede instrumentar correctamente"
    }
  ],

  "gherkinStandards": {
    "description": "Estándares para escribir escenarios Gherkin modulares y descriptivos para pruebas web",
    "version": "1.0.0",
    "philosophy": {
      "modularByDefault": "Los escenarios DEBEN ser modulares por defecto para favorecer reutilización y estabilidad",
      "descriptiveWhenRequired": "Usar escenarios descriptivos solo cuando la HU específicamente lo requiera",
      "userJourney": "Los escenarios deben representar journeys reales de usuario, no acciones técnicas aisladas"
    },

    "scenarioTypes": {
      "modularScenarios": {
        "description": "Escenarios modulares enfocados en acciones de UI reutilizables",
        "whenToUse": [
          "HU de componentes reutilizables (login, search, forms)",
          "Testing de UI components",
          "Regression testing de flujos estándar",
          "Componentes que se usan en múltiples HU"
        ],
        "characteristics": [
          "Acciones de UI claras (navigate, click, type, verify)",
          "Locators abstractos (no mencionar CSS/XPath)",
          "Parámetros data-driven",
          "Reutilizables entre diferentes páginas"
        ],
        "patterns": {
          "navigationPattern": {
            "template": "Feature: Navegación web\n\n  @HU-001 @web\n  Scenario Outline: Navegar a página principal\n    Given que el usuario está en la página de inicio\n    When navega a la sección \"<seccion>\"\n    Then debe visualizar el título \"<tituloEsperado>\"\n    And debe estar presente el elemento \"<elementoClave>\"\n\n    Examples:\n      | seccion    | tituloEsperado    | elementoClave |\n      | productos  | Catálogo de Productos | lista-productos |\n      | contacto   | Contáctanos        | formulario-contacto |",
            "benefits": [
              "Navegación reutilizable",
              "Validación de elementos clave",
              "Data-driven para diferentes secciones"
            ]
          },
          "searchPattern": {
            "template": "Feature: Búsqueda de contenido\n\n  @HU-002 @web\n  Scenario Outline: Buscar contenido específico\n    Given que el usuario está en la página de búsqueda\n    When ingresa \"<termino>\" en el campo de búsqueda\n    And ejecuta la búsqueda\n    Then debe mostrar resultados relacionados con \"<termino>\"\n    And debe haber al menos <minResultados> resultado(s)\n\n    Examples:\n      | termino   | minResultados |\n      | laptop    | 5             |\n      | teléfono  | 3             |",
            "benefits": [
              "Búsqueda reutilizable",
              "Validación de resultados mínimos",
              "Parámetros flexibles"
            ]
          },
          "formSubmissionPattern": {
            "template": "Feature: Envío de formularios\n\n  @HU-003 @web\n  Scenario Outline: Completar formulario de <tipo>\n    Given que el usuario está en el formulario de <tipo>\n    When completa los campos requeridos:\n      | campo      | valor       |\n      | nombre     | <nombre>    |\n      | email      | <email>     |\n      | mensaje    | <mensaje>   |\n    And envía el formulario\n    Then debe mostrar mensaje de confirmación \"<mensajeConfirmacion>\"\n\n    Examples:\n      | tipo     | nombre | email         | mensaje     | mensajeConfirmacion |\n      | contacto | Juan   | juan@test.com | Consulta    | Mensaje enviado     |",
            "benefits": [
              "Formularios reutilizables",
              "Data tables para campos",
              "Validación de confirmación"
            ]
          },
          "authenticationPattern": {
            "template": "Feature: Autenticación de usuario\n\n  @HU-004 @web\n  Scenario Outline: Login <tipo>\n    Given que el usuario está en la página de login\n    When ingresa credenciales <tipo>:\n      | usuario   | <usuario>   |\n      | contraseña| <password>  |\n    And hace clic en iniciar sesión\n    Then <resultadoEsperado>\n\n    Examples:\n      | tipo     | usuario    | password | resultadoEsperado              |\n      | válidas  | testuser   | pass123  | debe acceder al dashboard       |\n      | inválidas| wronguser  | badpass  | debe mostrar error de login     |",
            "benefits": [
              "Autenticación reutilizable",
              "Casos positivos y negativos",
              "Validaciones específicas por resultado"
            ]
          }
        }
      },

      "descriptiveScenarios": {
        "description": "Escenarios descriptivos enfocados en experiencia de usuario completa",
        "whenToUse": [
          "HU de negocio críticas",
          "Customer journeys complejos",
          "Flujos end-to-end importantes",
          "Documentación para stakeholders"
        ],
        "characteristics": [
          "Lenguaje natural del usuario",
          "Flujos completos de interacción",
          "Mínimos detalles técnicos",
          "Enfoque en valor de negocio"
        ],
        "patterns": {
          "ecommerceJourney": {
            "template": "Feature: Compra en línea completa\n\n  @HU-010 @business\n  Scenario: Cliente completa compra exitosamente\n    Given María es una cliente potencial\n    And está buscando productos específicos\n    When encuentra el producto deseado\n    And lo agrega al carrito\n    And procede al checkout\n    And completa la información de envío y pago\n    Then debe recibir confirmación de la orden\n    And debe recibir email con detalles de compra\n    And el producto debe estar reservado en inventario",
            "benefits": [
              "Journey completo del cliente",
              "Lenguaje natural",
              "Valor de negocio claro",
              "Ideal para documentación"
            ]
          },
          "errorHandlingUX": {
            "template": "Feature: Manejo de errores en formularios\n\n  @HU-015 @error-handling\n  Scenario: Usuario corrige errores de formulario\n    Given Carlos está completando un formulario de registro\n    When deja campos requeridos vacíos\n    And intenta enviar el formulario\n    Then debe ver mensajes de error en campos requeridos\n    And los campos con error deben estar resaltados\n    When completa los campos faltantes\n    And vuelve a enviar\n    Then debe procesar el registro exitosamente",
            "benefits": [
              "UX de manejo de errores",
              "Flujo de corrección",
              "Validación de retroalimentación visual"
            ]
          },
          "responsiveDesign": {
            "template": "Feature: Experiencia responsive\n\n  @HU-020 @responsive\n  Scenario: Usuario navega en dispositivo móvil\n    Given Pedro está accediendo desde un teléfono móvil\n    When abre el menú de navegación\n    Then debe ver el menú adaptado a móvil\n    And debe poder navegar a todas las secciones\n    When busca un producto\n    Then los resultados deben mostrarse correctamente en móvil\n    And debe poder agregar productos al carrito",
            "benefits": [
              "Validación de responsive design",
              "Experiencia cross-device",
              "Detección de problemas de UX móvil"
            ]
          }
        }
      }
    },

    "webSpecificPractices": {
      "uiValidation": {
        "visibility": [
          "Then debe visualizar \"<elemento>\"",
          "Then debe estar presente \"<elemento>\"",
          "Then no debe mostrar \"<elemento>\""
        ],
        "content": [
          "Then debe mostrar el texto \"<texto>\"",
          "Then debe contener \"<contenido>\"",
          "Then el título debe ser \"<titulo>\""
        ],
        "state": [
          "Then el campo debe estar habilitado",
          "Then el botón debe estar disponible",
          "Then debe estar seleccionado \"<opcion>\""
        ],
        "interaction": [
          "Then debe redirigir a \"<url>\"",
          "Then debe abrir nueva ventana",
          "Then debe descargar archivo"
        ]
      },

      "waitConsiderations": {
        "implicit": "Evitar depender solo de waits implícitos",
        "explicit": "Usar waits explícitos para elementos dinámicos",
        "patterns": [
          "Then debe aparecer \"<elemento>\" en menos de 10 segundos",
          "Then debe cargar la página completamente",
          "Then debe terminar de cargar \"<contenido_dinamico>\""
        ]
      },

      "accessibility": {
        "basicChecks": [
          "Then elementos interactivos deben ser accesibles por teclado",
          "Then imágenes deben tener alt text",
          "Then formularios deben tener labels asociados"
        ],
        "semantic": [
          "Then debe usar headings semánticos (h1, h2, h3)",
          "Then botones deben tener texto descriptivo",
          "Then tablas deben tener headers apropiados"
        ]
      }
    },

    "bestPractices": {
      "scenarioDesign": [
        "Un escenario = un journey de usuario específico",
        "Máximo 7-10 steps por escenario",
        "Given = estado inicial del sistema/usuario",
        "When = acción principal del usuario",
        "Then = resultado observable del negocio"
      ],
      "dataManagement": [
        "Usar Examples tables para múltiples datasets",
        "Evitar datos hardcodeados en steps",
        "Considerar test data management",
        "Limpiar datos después de ejecución"
      ],
      "antiPatterns": [
        "❌ Clicking on elements that don't exist yet",
        "❌ Verifying implementation details (CSS classes)",
        "❌ Tests that depend on specific timing",
        "❌ Tests that modify shared state"
      ]
    },

    "modularVsDescriptive": {
      "decisionMatrix": {
        "chooseModularWhen": [
          "Componentes reutilizables (login, search, forms)",
          "Testing de UI regression",
          "APIs o servicios compartidos",
          "Necesitas velocidad de ejecución"
        ],
        "chooseDescriptiveWhen": [
          "HU críticas para el negocio",
          "Customer journeys importantes",
          "Documentación para stakeholders",
          "Flujos end-to-end complejos"
        ]
      },

      "hybridApproach": {
        "modularImplementation": "Implementar steps técnicos de forma modular",
        "descriptiveInterface": "Exponer escenarios descriptivos para negocio",
        "example": "Step técnico modular + Feature descriptiva para negocio"
      }
    }
  },

  "performanceTips": [
    "Usar id o name para locators más rápidos",
    "Evitar xpath complejo que atraviese todo el DOM",
    "Reutilizar Target objects en lugar de recrearlos",
    "Configurar timeouts apropiados en serenity.properties",
    "Usar headless mode para ejecución en CI/CD",
    "Paralelizar tests cuando sea posible"
  ],

  "crossReferences": {
    "description": "Referencias a estándares relacionados para consistencia",
    "apiStandard": {
      "file": "serenity-api-screenplay.standard.json",
      "version": "1.1.0",
      "sharedSections": [
        "principles.screenplayFirst",
        "namingConventions.language",
        "projectStructure.buildTools",
        "gherkinStandards (similar pero adaptado a API)"
      ],
      "differences": [
        "Web: Enfoque en UI interactions y locators",
        "API: Enfoque en HTTP methods y JSON",
        "Ambos: Mismo patrón Screenplay y estructura de proyecto"
      ]
    },
    "consistencyRules": [
      "Mismos principios de Screenplay en Web y API",
      "Convenciones de naming consistentes",
      "Estructura de proyecto similar",
      "Mismo approach para Gherkin (modular by default)",
      "Validaciones similares de patrones"
    ]
  },

  "huImplementationChecklist": {
    "description": "Checklist completo para implementar HU WEB con Screenplay",
    "preImplementation": [
      "✅ Analizar requerimientos de la HU",
      "✅ Identificar páginas y elementos UI",
      "✅ Mapear acciones de negocio (Tasks)",
      "✅ Definir validaciones (Questions)",
      "✅ Diseñar escenarios Gherkin",
      "✅ Verificar dependencias disponibles"
    ],
    "structureCreation": [
      "✅ Crear directorios src/main/java/com/screenplay/web/",
      "✅ Crear directorios src/test/java/com/sistecredito/web/",
      "✅ Crear directorio src/test/resources/",
      "✅ Configurar build.gradle o pom.xml con dependencias completas",
      "✅ Crear serenity.properties con configuración base",
      "✅ Crear .gitignore apropiado"
    ],
    "uiLayerImplementation": [
      "✅ Crear UI classes que extiendan PageObject",
      "✅ Definir Target locators con prefijos correctos (TXT_, BTN_, etc.)",
      "✅ Usar estrategias de locator óptimas (id > css > xpath)",
      "✅ Agregar @DefaultUrl en página inicial si aplica",
      "✅ NO incluir lógica ni métodos de acción",
      "✅ Validar que NO usa By directo (solo Target)"
    ],
    "questionLayerImplementation": [
      "✅ Crear Questions que implementen Question<T>",
      "✅ Definir tipos de retorno apropiados (Boolean, String, Integer)",
      "✅ Implementar answeredBy() con lógica de validación",
      "✅ Crear factory methods estáticos",
      "✅ Incluir WaitUntil si es necesario para sincronización",
      "✅ NO hacer aserciones directas (solo retornar valores)"
    ],
    "taskLayerImplementation": [
      "✅ Crear Tasks que implementen Task interface",
      "✅ Definir constructores públicos",
      "✅ Implementar performAs() con acciones de negocio",
      "✅ Crear factory methods con Tasks.instrumented()",
      "✅ Usar lenguaje de negocio en nombres de métodos",
      "✅ Agregar @Step annotations para reporting",
      "✅ Incluir waits apropiados para elementos dinámicos",
      "✅ NO usar WebDriver directo"
    ],
    "interactionLayerImplementation": [
      "✅ Crear solo si hay comportamientos reutilizables",
      "✅ Implementar Interaction interface",
      "✅ Usar Instrumented.instanceOf() en factory methods",
      "✅ Definir constructor público",
      "✅ NO incluir aserciones",
      "✅ Considerar si realmente se necesita o usar Task directo"
    ],
    "stepDefinitionLayerImplementation": [
      "✅ Crear en paquete com.sistecredito.web.stepdefinitions",
      "✅ Usar anotaciones en inglés (io.cucumber.java.en.*)",
      "✅ Implementar máximo 3-5 líneas por método",
      "✅ NO incluir lógica compleja (if, for, try-catch)",
      "✅ Usar theActorCalled() para primer uso del actor",
      "✅ Usar theActorInTheSpotlight() para acciones subsiguientes",
      "✅ NO duplicar @Before/@After (están en SetTheStage)"
    ],
    "configurationLayerImplementation": [
      "✅ Crear SetTheStage.java en com.sistecredito.web.conf",
      "✅ Implementar @Before con OnStage.setTheStage(new OnlineCast())",
      "✅ Implementar @After con OnStage.drawTheCurtain()",
      "✅ Crear Runner con CucumberWithSerenity",
      "✅ Configurar glue correcto (stepdefinitions,conf)",
      "✅ Definir tags apropiados (@smokeTest, @regression)",
      "✅ Configurar serenity.properties completo"
    ],
    "featureLayerImplementation": [
      "✅ Crear archivo .feature en src/test/resources/features/",
      "✅ Escribir escenarios en Gherkin claro",
      "✅ Usar Given-When-Then structure",
      "✅ Incluir Examples tables si aplica",
      "✅ Definir Background si hay pasos comunes",
      "✅ Usar tags apropiados (@HU-001, @smokeTest)"
    ],
    "validationAndTesting": [
      "✅ Compilación exitosa sin errores",
      "✅ Tests individuales pasan",
      "✅ Reportes Serenity se generan correctamente",
      "✅ Screenplay pattern validado (no @Steps, no WebDriver directo)",
      "✅ Código cumple estándares OOP/SOLID",
      "✅ Locators son estables y únicos",
      "✅ Waits apropiados evitan flaky tests"
    ],
    "documentationAndMaintenance": [
      "✅ README.md con instrucciones de ejecución",
      "✅ Comentarios en código cuando sea necesario",
      "✅ Nombres descriptivos en español para clases personalizadas",
      "✅ Documentación de locators complejos",
      "✅ Scripts de ejecución (gradle clean test aggregate)"
    ]
  }
}